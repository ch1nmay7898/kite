(this.webpackJsonpgroupthink=this.webpackJsonpgroupthink||[]).push([[0],{197:function(e,t,n){},242:function(e,t,n){e.exports=n(420)},247:function(e,t,n){},248:function(e,t,n){},260:function(e,t,n){},265:function(e,t,n){},266:function(e,t,n){},267:function(e,t,n){},268:function(e,t,n){},269:function(e,t,n){e.exports=n.p+"static/media/1.bb11a7e3.webp"},270:function(e,t,n){e.exports=n.p+"static/media/2.3bb12c20.webp"},271:function(e,t,n){e.exports=n.p+"static/media/3.3651e14c.webp"},272:function(e,t,n){e.exports=n.p+"static/media/4.fb14f3f8.webp"},288:function(e,t){},290:function(e,t){},300:function(e,t){},302:function(e,t){},329:function(e,t){},330:function(e,t){},335:function(e,t){},337:function(e,t){},361:function(e,t){},383:function(e,t,n){},386:function(e,t,n){},387:function(e,t,n){e.exports=n.p+"static/media/cursor.3f646017.svg"},388:function(e,t,n){},395:function(e,t,n){e.exports=n.p+"static/media/loadingscience.11761717.gif"},396:function(e,t,n){},420:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(30),o=n.n(c),i=(n(247),n(31)),l=n(20);n(248);function u(e){var t=Object(l.h)();return console.log("splashpage says: I was consulted",t),e.pendingAuth?r.a.createElement("div",{id:"splash"},r.a.createElement("h1",{id:"splashText"},"Welcome to groupthink!"),r.a.createElement("blockquote",null,"Unleash your ideas")):r.a.createElement(l.a,{to:{pathname:e.isAuth?"/dashboard":"/login",state:{from:t}}})}var s=n(205),d=n.n(s);n(260);function m(e){var t,n=Object(l.h)(),a="/dashboard";return void 0!=(null===(t=n.state)||void 0===t?void 0:t.from)&&(a=n.state.from.pathname),e.authState.isSignedIn?r.a.createElement(l.a,{to:{pathname:a,state:{from:n}}}):r.a.createElement("div",{id:"login"},r.a.createElement("div",{id:"landing"},r.a.createElement("div",{className:"landing-title"},"groupthink"),r.a.createElement("div",{className:"landing-subtitle"},r.a.createElement("b",null,"Unleash your ideas like never before")),r.a.createElement("div",{className:"landing-text"},r.a.createElement("em",null,"groupthink")," is a real-time collaborative platform that brings the power of the web into a new type of document.")),r.a.createElement(d.a,{className:"landing-login",uiConfig:e.uiConfig,firebaseAuth:e.auth()}))}var h=n(100),p=function(e){e.path;var t=e.children,n=e.isAuth,a=Object(h.a)(e,["path","children","isAuth"]);return r.a.createElement(l.b,Object.assign({},a,{render:function(e){var a=e.location;return n?t:r.a.createElement(l.a,{to:{pathname:"/",state:{from:a}}})}}))},f=n(17),g=n.n(f),b=n(32),v=n(15),j=n(5),E=n(8),O=n(9);n(136),n(262),n(263),n(264);O.initializeApp({apiKey:"AIzaSyAjOQlUVvfpaPFKw_dsjVF-ZO9xAFFwLJc",authDomain:"groupthink-fc4b2.firebaseapp.com",databaseURL:"https://groupthink-fc4b2.firebaseio.com",projectId:"groupthink-fc4b2",storageBucket:"groupthink-fc4b2.appspot.com",messagingSenderId:"268412476509",appId:"1:268412476509:web:6a00e11a591b5852d4c1b4",measurementId:"G-94X9F74RYY"});var y=O.auth,w=O.database(),x=O.database.ServerValue.TIMESTAMP,k=O.storage,C=(O.storage().ref(),O.functions()),I={tester:{center:{x:300,y:300},container:{height:"4000px",width:"4000px"},nodes:{root:{children:{dummy:1}}}}},S=r.a.memo((function(e){var t=e.handleClick,n=e.children,a=e.className,c=e.style,o=e.isLocked;return r.a.createElement("button",{onClick:t,className:a,style:c,disabled:o},n)})),D=n(229);n(265);var U=r.a.memo((function(e){return r.a.createElement(D.a,{style:{margin:e.margin||"5px 5px 5px 5px",fontWeight:e.bold?"bold":"normal",width:e.widthOffset?"calc(100% - "+e.widthOffset+"px)":"95%",fontFamily:e.fontFamily||"Varela Round, sans-serif",textDecorationLine:e.strikethrough?"line-through":"none",color:e.color||"black"},className:"inline-input",placeholder:e.placeholder||"Type something here...",value:e.text,onChange:e.onChange,onBlur:e.onSave,disabled:e.disabled,spellCheck:"false"})}));n(266),n(267);var A=r.a.memo((function(e){return e.addNew?r.a.createElement("div",{className:"project-card"},r.a.createElement(S,{className:"custom_btn",handleClick:e.onAddNew},"Create New Project")):r.a.createElement("div",{id:e.id,className:"project-card"},e.card.shared?r.a.createElement("div",null,"Shared By :- ",e.card.shared.name," ",r.a.createElement("br",null)," Shared Type : ",e.card.shared.type):null,r.a.createElement("img",{onClick:function(){return e.onOpen(e.id)},src:e.card.thumbnailURL,alt:"project thumbnail"}),void 0===e.card.shared?r.a.createElement(r.a.Fragment,null,r.a.createElement(U,{className:"project-card-item",text:e.card.name,onChange:function(t){return e.onChange(e.id,t.target.value)},onSave:function(){return e.onSave(e.id)}}),r.a.createElement(S,{className:"project-card-item custom_btn highlight",style:{marginBottom:"5px"},handleClick:function(){return e.onDelete(e.id)}},"Delete")):r.a.createElement(r.a.Fragment,null,"Project Name: ",e.card.name))}));n(268);function N(e){var t=Object(l.g)(),c=Object(a.useState)(null),o=Object(E.a)(c,2),i=o[0],u=o[1],s=Object(a.useState)(!1),d=Object(E.a)(s,2),m=d[0],h=d[1],p="users/"+e.currentUser().uid+"/projects/";Object(a.useEffect)((function(){var t=w.ref("users/"+e.currentUser().uid+"/projects/");return t.on("value",(function(e){console.log("triggered listener and updated project list state, snapshot value was",e.val()),u(e.val()),h(!0)})),function(){return t.off("value")}}),[e]);var f=function(){var t=Object(b.a)(g.a.mark((function t(n){var a,r,c;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("about to delete project",n),a=w.ref("documents/"+n+"/room/").once("value").then((function(e){return e.val()})).catch((function(e){return console.log("onDelete Error",e)})),console.log("UID DATA KEYS",a),r={},t.next=6,a.then((function(t){t&&Object.keys(t).map((function(t){t!==e.currentUser().uid&&(r["users/"+t+"/projects/"+n+"/"]=null)}))})).catch((function(e){return console.log("Error While UID Fetch",e)}));case 6:r["documents/"+n+"/"]=null,r["creator/"+n+"/"]=null,r[p+n]=null,console.log("UPDATES ",r),C.httpsCallable("createNewProject")(r).then((function(e){return console.log(e,r)})).catch((function(e){return console.log("ERROR WHILE DELETE",e)})),c=function(e,t){k().ref(e).child(t).delete().then(console.log("File Deleted")).catch((function(e){return console.log("File Delete Error",e)}))},function e(t){console.log("Path TO Delete",t);var n=k().ref(t);n.listAll().then((function(t){t.prefixes.length>0||t.items.length>0?(t.items.length>0&&t.items.forEach((function(e){c(n.fullPath,e.name)})),t.prefixes.forEach((function(t){e(t.fullPath)}))):console.log("No Files Exist")})).catch((function(e){console.log("List All Error ",e)}))}("root/"+n+"/");case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),O=function(){var e=Object(b.a)(g.a.mark((function e(t){var n,a,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=w.ref("documents/"+t+"/room/").once("value").then((function(e){return e.val()})).catch((function(e){return console.log("on Rename Error",e)})),console.log("UID DATA KEYS",n),a=i[t].name,console.log("about to rename project",t,", changing title to",a),r={},e.next=7,n.then((function(e){e&&Object.keys(e).map((function(e){console.log("DATAKEYS Count",e),r["users/"+e+"/projects/"+t+"/name"]=a}))})).catch((function(e){return console.log("Error While UID Fetch",e)}));case 7:r["documents/"+t+"/metadata/name"]=a,C.httpsCallable("createNewProject")(r).then((function(e){return console.log("successfully renamed project",t,"to",a,"\n and Updates are \n ",e,r)})).catch((function(e){return console.log(e)}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(e){console.log("attempting to open project",e),t.push("/project/"+e)},S=function(e,t){console.log("un-finalized text change in",e,". new text:",t),console.log(Object(j.a)(Object(j.a)({},i),{},Object(v.a)({},e,Object(j.a)(Object(j.a)({},i[e]),{},{name:t})))),u(Object(j.a)(Object(j.a)({},i),{},Object(v.a)({},e,Object(j.a)(Object(j.a)({},i[e]),{},{name:t}))))},D=i?Object.entries(i).filter((function(e){var t=Object(E.a)(e,2);t[0];return t[1].shared})).map((function(e){var t=Object(E.a)(e,2),n=t[0],a=t[1];return r.a.createElement(A,{key:n,id:n,card:a,onChange:S,onSave:O,onDelete:f,onOpen:y})})):null,U=i?Object.entries(i).filter((function(e){var t=Object(E.a)(e,2);t[0];return!t[1].shared})).map((function(e){var t=Object(E.a)(e,2),n=t[0],a=t[1];return r.a.createElement(A,{key:n,id:n,card:a,onChange:S,onSave:O,onDelete:f,onOpen:y})})):null;return m?r.a.createElement("div",{className:"project-view-container"},r.a.createElement("div",{className:"project-container-title"}," Your Projects"),r.a.createElement("div",{className:"project-card-container"},r.a.createElement(A,{addNew:!0,onAddNew:function(){console.log("clicked add new");var t=w.ref().child(p).push().key,a={},r=[n(269),n(270),n(271),n(272)],c=r[Math.floor(Math.random()*r.length)];a["creator/"+t]=e.currentUser().uid,a[p+t]={access:"rw",name:"New Project",thumbnailURL:c,isLocked:!1},a["documents/"+t]=Object(j.a)({metadata:{name:"New Project",thumbnailURL:c,datecreated:x},users:Object(v.a)({},e.currentUser().uid,"rw")},I.tester),C.httpsCallable("createNewProject")(a).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}))}}),U||r.a.createElement("div",{className:"project-container-nodata"},'You have not created any projects yet. What are you waiting for? Click "Add a Project" to begin.')),r.a.createElement("div",{className:"project-container-title"},"Shared With You"),r.a.createElement("div",{className:"project-card-container"},D||r.a.createElement("div",{className:"project-container-nodata"},"No one has shared a project with you yet. SAD!"))):r.a.createElement("div",null,"Loading...")}var P=n(228),L=n(451),T=n(450),z=n(226),F=n(207),R=n(438),V=n(439),M=n(440),_=n(441),W=n(442),Y=n(443),B=n(444),q=n(445),G=n(446),H=n(447),$=n(448),K=n(449),X=function(e){var t=e.url,n=e.title,a=e.size,c=Object(F.Passers)({url:t,className:"network__share-button"})({className:"network cursor-pointer hover transition--default",title:"Share ".concat(t)})("li");return r.a.createElement("div",{className:"social_link"},r.a.createElement(c,null,r.a.createElement(R.a,{quote:n},r.a.createElement(V.a,{size:a})),r.a.createElement(M.a,{title:n},r.a.createElement(_.a,{size:a})),r.a.createElement(W.a,{title:n,separator:":: "},r.a.createElement(Y.a,{size:a})),r.a.createElement(B.a,{title:n,windowWidth:750,windowHeight:600},r.a.createElement(q.a,{size:a})),r.a.createElement(G.a,{url:String(window.location),windowWidth:1e3,windowHeight:730},r.a.createElement(H.a,{size:a})),r.a.createElement($.a,{subject:"Groupthink Web Link",body:"Here is the link ".concat(t)},r.a.createElement(K.a,{size:a}))))},J=n(81),Z=n(225),Q=(n(197),{DropdownIndicator:null}),ee=function(e){return{label:e,value:e}},te=function(){var e=Object(b.a)(g.a.mark((function e(t,n,a,r,c,o,i){var l,u;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l="documents/".concat(t,"/"),u={},"public"===i&&(u[l+"/users/public"]=r),u["".concat(l,"/cursors/").concat(n)]={name:a,x:0,y:0,time:x},u["".concat(l,"/room/").concat(n)]={name:a,photoURL:o,email:c,permission:r},e.next=7,w.ref().update(u).then(console.log("Created ROOM")).catch((function(e){return e}));case 7:case"end":return e.stop()}}),e)})));return function(t,n,a,r,c,o,i){return e.apply(this,arguments)}}(),ne=r.a.memo((function(e){var t=Object(a.useState)(!1),n=Object(E.a)(t,2),c=n[0],o=n[1],i=Object(a.useState)(!1),l=Object(E.a)(i,2),u=l[0],s=l[1],d=Object(a.useState)(!1),m=Object(E.a)(d,2),h=m[0],p=m[1],f=Object(a.useState)({inputValue:"",value:[]}),v=Object(E.a)(f,2),j=v[0],O=v[1],y=Object(a.useState)(),x=Object(E.a)(y,2),k=x[0],I=x[1],D=Object(a.useState)(),U=Object(E.a)(D,2),A=U[0],N=U[1],F=Object(a.useState)(),R=Object(E.a)(F,2),V=R[0],M=R[1],_=Object(a.useState)(null),W=Object(E.a)(_,2),Y=W[0],B=W[1];Object(a.useEffect)((function(){return w.ref("documents/"+q+"/room/").on("value",(function(e){return B(e.val())})),function(){return w.ref("documents/"+q+"/room/").off()}}),[]);var q=e.projectID,G=function(e,t){switch(t){case"usersUnderDocument":return"documents/".concat(q,"/users/").concat(e,"/");case"projectUnderUser":return"users/".concat(e,"/projects/").concat(q,"/");case"cursorUnderDocument":return"documents/".concat(q,"/cursors/").concat(e,"/");case"roomUnderDocument":return"documents/".concat(q,"/room/").concat(e,"/");default:return}},H=function(e,t,n){return e.replace(new RegExp($(t),"g"),n)},$=function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},K=function(t){return function(){var n=H(J.encrypt(A,"grpthink12!").toString(),"/","$"),a=H(J.encrypt(e.currentUser.displayName,"grpthink12!").toString(),"/","$"),r=H(J.encrypt(k,"grpthink12!").toString(),"/","$"),c=String(window.location)+"/"+n+"/"+r+"/"+a,o={};o[A]=n,o[e.currentUser.displayName]=a,o[k]=r,o.customURL=c,console.log("Encryption Log \n",o),void 0!=k&&void 0!=A?("emailLink"===t?(p(!0),console.log("This Operation \n",k,A,V,h)):s(!0),te(e.projectID,e.currentUser.uid,e.currentUser.displayName,A,e.currentUser.email,e.currentUser.photoURL,k).then("Room & Cursor Made").catch((function(e){return e})),M(c)):(p(!1),s(!1))}},ne=function(e){N(e.target.value)},ae=function(e){I(e.target.value)},re=function(){o(!1),s(!1),M(null),I(null),N(null),O({inputValue:"",value:[]}),p(!1)};var ce=function(e,t){return function(){var n=!0;"rw"===t&&(n=!1);var a={};a[G(e,"projectUnderUser")+"access"]=t,a[G(e,"projectUnderUser")+"isLocked"]=n,a[G(e,"usersUnderDocument")]=t,a[G(e,"roomUnderDocument")+"permission"]=t,C.httpsCallable("createNewProject")(a).then((function(e){return console.log("Updates Done",e,a)})).catch((function(e){return console.log(e)}))}},oe=function(e){return Object(b.a)(g.a.mark((function t(){var n,a;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.ref("documents/".concat(q,"/users/")).once("value").then((function(t){return t.hasChild(e)})).catch((function(e){return e}));case 2:n=t.sent,(a={})[G(e,"projectUnderUser")+"shared"]=null,n&&(a[G(e,"usersUnderDocument")]="rw"),C.httpsCallable("createNewProject")(a).then((function(e){return console.log("Updates Done",e,a)})).catch((function(e){return console.log(e)}));case 8:case"end":return t.stop()}}),t)})))},ie=function(e){var t=j.inputValue,n=j.value;if(t)switch(e.key){case"Enter":case"Tab":console.group("Value Added"),console.log(n),console.groupEnd(),/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(t).toLowerCase())?O({inputValue:"",value:[].concat(Object(P.a)(n),[ee(t)])}):alert("Invalid Email Entered ".concat(t),O(j)),e.preventDefault()}};return r.a.createElement(r.a.Fragment,null,r.a.createElement(S,{className:e.buttonClassName,handleClick:function(){return o(!0)}},"Share"),r.a.createElement(L.a,{show:c,onHide:re},r.a.createElement(L.a.Header,{closeButton:!0},r.a.createElement(L.a.Title,null,"Share Your Project")),r.a.createElement(L.a.Body,null,"Type Of Link To be Shared",r.a.createElement("br",null),r.a.createElement("input",{type:"radio",name:"linkType",value:"public",onChange:function(e){return ae(e)},required:!0}),r.a.createElement("label",{htmlFor:"male"},"Public"),r.a.createElement("input",{type:"radio",name:"linkType",value:"private",onChange:function(e){return ae(e)},required:!0}),r.a.createElement("label",{htmlFor:"male"},"Private "),r.a.createElement("br",null),r.a.createElement("input",{type:"radio",name:"options",value:"r",onChange:function(e){return ne(e)},required:!0}),r.a.createElement("label",{htmlFor:"male"},"Read Only"),r.a.createElement("input",{type:"radio",name:"options",value:"rw",onChange:function(e){return ne(e)},required:!0}),r.a.createElement("label",{htmlFor:"male"},"Read and Write "),r.a.createElement("br",null),h?r.a.createElement("div",null,r.a.createElement(Z.a,{components:Q,inputValue:j.inputValue,isClearable:!0,isMulti:!0,menuIsOpen:!1,onChange:function(e,t){console.group("Value Changed"),console.log(e),console.log("action: ".concat(t.action)),console.groupEnd(),O({inputValue:j.inputValue,value:e})}.bind(void 0),onInputChange:function(e){O({inputValue:e,value:j.value})},onKeyDown:function(e){return ie(e)},placeholder:"Type something and press enter...",value:j.value}),r.a.createElement("input",{type:"submit",onClick:function(){if(console.log("Send Emails",j.value),j.value.length>0){var e=C.httpsCallable("sendLinkEmail");Object.entries(j.value).map((function(t){var n=Object(E.a)(t,2),a=n[0],r=n[1],c={};console.log("ITEM",a,r),c.emailId=r.value,c.link=V,e(c).then((function(e){return console.log("Sended Email",e,c)})).catch((function(e){return console.log(e)}))}))}else console.log("EMPTY STRING")},className:"custom_btn"})):r.a.createElement(S,{className:"custom_btn",handleClick:K("emailLink")},"Send Email "),u?r.a.createElement("div",null,r.a.createElement("br",null),"Copy Your Link :",r.a.createElement("br",null),r.a.createElement("b",{style:{display:"inline-flex"}},V),r.a.createElement("br",null),r.a.createElement(X,{url:V,title:"Groupthink Website",size:"2.5rem"})):r.a.createElement(S,{className:"custom_btn",handleClick:K()},"Generate Link"),Y?Object.entries(Y).map((function(t){var n,a=Object(E.a)(t,2),c=a[0],o=a[1];return r.a.createElement("div",{key:c},r.a.createElement("hr",null),r.a.createElement("img",{src:null===o||void 0===o?void 0:o.photoURL,className:"menu-bar-user-profile-picture"}),r.a.createElement("b",null,null===o||void 0===o?void 0:o.email),"-",c===e.currentUser.uid?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,o.name),r.a.createElement("span",null,"(Owner)")):r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,null===o||void 0===o?void 0:o.name),"\xa0",r.a.createElement("span",null,r.a.createElement("strong",null,null===o||void 0===o?void 0:o.permission)),"\xa0 \xa0",r.a.createElement("span",null,r.a.createElement(S,{handleClick:(n=c,function(){var e={};e[G(n,"projectUnderUser")]=null,e[G(n,"usersUnderDocument")]=null,e[G(n,"cursorUnderDocument")]=null,e[G(n,"roomUnderDocument")]=null,C.httpsCallable("createNewProject")(e).then((function(t){return console.log("Updates Done",t,e)})).catch((function(e){return console.log(e)}))})},"X")),r.a.createElement(T.a,{title:null===o||void 0===o?void 0:o.permission,size:"sm"},r.a.createElement(z.a.Item,{onClick:ce(c,"r")},"Read Only"),r.a.createElement(z.a.Item,{onClick:ce(c,"rw")},"Read And Write"),r.a.createElement(z.a.Divider,null),r.a.createElement(z.a.Item,{onClick:oe(c)},"Make Owner"))))})):r.a.createElement("p",null,r.a.createElement("hr",null),"No Lists")),r.a.createElement(L.a.Footer,null,r.a.createElement(S,{className:"custom_btn",handleClick:re},"Close"),r.a.createElement(S,{className:"custom_btn",handleClick:re},"Save Changes"))))}));function ae(e){var t=e.currentUser();return r.a.createElement("div",{className:"menu-bar topheader"},r.a.createElement("div",{className:"menu-bar-panel menu-bar-panel-left"},r.a.createElement("img",{alt:"",className:"menu-bar-user-profile-picture",src:t.photoURL}),r.a.createElement("div",{className:"menu-bar-user-name"},t.displayName)),r.a.createElement("div",{className:"menu-bar-panel menu-bar-panel-center"},r.a.createElement("div",{className:"menu-bar-site-title"},r.a.createElement(i.b,{to:"/dashboard"},"groupthink"))),r.a.createElement("div",{className:"menu-bar-panel menu-bar-panel-right"},r.a.createElement(S,{className:"menu-action-button",handleClick:e.onLogOut},"Log Out"),e.document&&!e.isOwner?r.a.createElement(r.a.Fragment,null,r.a.createElement(ne,{projectID:e.projectID,buttonClassName:"menu-action-button highlight",currentUser:t,isOwner:e.isOwner})):null))}function re(e){var t=Object(l.h)();return r.a.createElement("div",null,r.a.createElement(ae,{onLogOut:function(){return e.signOut(),r.a.createElement(l.a,{to:{pathname:"/dashboard",state:{from:t}}})},currentUser:e.currentUser}),r.a.createElement(N,{currentUser:e.currentUser}))}var ce=n(43),oe=n(203),ie=n(70),le=n.n(ie),ue=r.a.memo((function(e){var t;return r.a.createElement(r.a.Fragment,null,(null===(t=e.content)||void 0===t?void 0:t.url)?r.a.createElement("div",null,r.a.createElement(le.a,{url:e.content.url,width:"",height:"250px",controls:!0})):null)})),se=n(210),de=r.a.memo((function(e){return r.a.createElement("div",null,void 0===e.content.text?Object.entries(e.content).map((function(e,t){var n,a;return r.a.createElement("div",{key:e[0]},"File Name :",r.a.createElement("a",{href:null===(n=e[1])||void 0===n?void 0:n.url,target:"_blank"},e[0].split(">")[0]),r.a.createElement(se.a,{src:null===(a=e[1])||void 0===a?void 0:a.url,style:{overflow:"hidden",display:"inline-table"},scrolling:"no"}))})):null)})),me=r.a.memo((function(e){return r.a.createElement("div",null,void 0===e.content.text?Object.entries(e.content).map((function(e,t){var n;return r.a.createElement("div",{key:e[0]},"File Name : ",e[0].split(">")[0],r.a.createElement("img",{src:"".concat(null===(n=e[1])||void 0===n?void 0:n.url)}))})):null)})),he=n(131),pe=r.a.memo((function(e){return r.a.createElement("div",null,void 0===e.content.text?Object.entries(e.content).map((function(e,t){var n;return r.a.createElement("div",{key:e[0]},"File Name :",r.a.createElement("a",{href:null===(n=e[1])||void 0===n?void 0:n.url,target:"_blank"},e[0].split(">")[0]))})):null)})),fe=r.a.memo((function(e){return r.a.createElement("div",null,void 0===e.content.text?Object.entries(e.content).map((function(t,n){var a;return r.a.createElement("div",{key:t[0]},"File Name : ",t[0].split(">")[0],r.a.createElement(le.a,{controls:!0,url:null===(a=t[1])||void 0===a?void 0:a.url,width:e.size.width,height:e.size.height}))})):null)})),ge=n(227),be=(n(382),r.a.memo((function(e){return r.a.createElement("div",null,void 0===e.content.text?Object.entries(e.content).map((function(e,t){var n;return r.a.createElement("div",{key:e[0]},"File Name : ",e[0].split(">")[0],r.a.createElement(ge.a,{src:null===(n=e[1])||void 0===n?void 0:n.url,showDownloadProgress:"false",preload:"metadata"}))})):null)}))),ve=r.a.memo((function(e){var t;return r.a.createElement(r.a.Fragment,null,(null===(t=e.content)||void 0===t?void 0:t.url)?r.a.createElement("div",null,r.a.createElement(he.ReactTinyLink,{cardSize:"small",showGraphic:!0,maxLine:2,minLine:1,url:e.content.url})):null)}));var je=r.a.memo((function(e){return r.a.createElement("div",{className:"text-node",style:{overflowX:"hidden",overflowY:"auto",width:"100%",height:"100%"}},r.a.createElement(U,{onChange:function(t){return n=t,e.typeAPI.changeContent(e.id,{text:n.target.value});var n},onSave:function(){return e.typeAPI.saveContent(e.id,{text:e.content.text})},text:e.content.text,lwidth:"100px",disabled:e.isLocked}))})),Ee=(n(383),n(222));n(385);var Oe=r.a.memo((function(e){var t=Object(a.useState)([]),n=Object(E.a)(t,2),c=n[0],o=n[1],i={text:{height:200,width:280},todo:{height:300,width:230},file:{height:100,width:280},image:{height:300,width:350},VideoFile:{height:200,width:350},VideoLink:{height:250,width:350},pdf:{height:208,width:300},audio:{height:142,width:300},link:{height:157,width:340}},l={process:function(t,n,a,r,c,o,l){var u,s={contentType:null===n||void 0===n?void 0:n.type},d=e.id+"/"+n.name.split(".")[0]+">"+n.lastModified+"/",m=function(e){var t=["image","video","audio","pdf"],n="file",a=e.split("/");console.log(a,a.length);for(var r=a.length-1;r>=0;r--)-1!==t.indexOf(a[r])&&(n=a[r]);return console.log(e,n),"video"===n?"VideoFile":n}(null===n||void 0===n?void 0:n.type);return e.typeAPI.requestUpload(d,n,Object(j.a)(Object(j.a)({},a),s),(function(t,n){u=n,"number"===typeof t?o(!0,t,100):(r(e.id),e.typeAPI.requestDownload(d,(function(t,n){var a;e.typeAPI.changeType(e.id,m,i[m]),e.typeAPI.saveContent(e.id,(a={},Object(v.a)(a,n.name,{url:t,metadata:n}),Object(v.a)(a,"/text",null),a))})))})),{abort:function(){console.log("attempted to cancel upload, success:",u.cancel()),l()}}}};return r.a.createElement("div",null,r.a.createElement(S,{handleClick:function(){return e.typeAPI.changeType(e.id,"text",i.text)}},"Text"),r.a.createElement(S,{handleClick:function(){return e.typeAPI.changeType(e.id,"todo",i.todo)}},"Todo"),r.a.createElement(U,{onChange:function(t){return function(t){e.typeAPI.changeContent(e.id,{text:t.target.value})}(t)},onSave:function(){var t=function(e){if(function(e){try{new URL(e)}catch(t){return!1}return!0}(e)){var t="link";return le.a.canPlay(e)&&(t="VideoLink"),console.log("Detector Extention Type After Loop",t),t}return"NoLink"}(e.content.text);"NoLink"===t?e.typeAPI.saveContent(e.id,{text:e.content.text}):(e.typeAPI.changeType(e.id,t,i[t]),e.typeAPI.saveContent(e.id,{url:e.content.text}))}}),r.a.createElement(Ee.FilePond,{files:c,allowMultiple:!1,maxFiles:1,onupdatefiles:function(e){return o(e.map((function(e){return e.file})))},server:l}))}));var ye=r.a.memo((function(e){var t=["great","nice","awesome","crazy","special"];return r.a.createElement("div",{className:"todo-item",id:e.itemID},r.a.createElement("label",{className:"checkbox"},r.a.createElement("input",{type:"checkbox",checked:e.checked,onChange:function(t){return e.onCheckToggle(t.target.checked)}}),r.a.createElement("span",null)),r.a.createElement(U,{placeholder:"do something "+t[e.order%t.length],text:e.text,widthOffset:60,onChange:function(t){return e.onTextChange(t.target.value)},onSave:function(t){return e.onTextSave(t.target.value)},margin:"0px 0px 0px 10px",strikethrough:e.checked,color:e.checked?"grey":"black",disabled:e.isLocked}),r.a.createElement(S,{handleClick:e.onDelete,isLocked:e.isLocked},"x"))})),we=r.a.memo((function(e){var t=function(t,n,a){e.typeAPI.saveContent(e.id,Object(j.a)(Object(j.a)({},e.content),{},{items:Object(j.a)(Object(j.a)({},e.content.items),{},Object(v.a)({},t,Object(j.a)(Object(j.a)({},e.content.items[t]),{},Object(v.a)({},n,a))))}))};return r.a.createElement("div",{className:"todo-card",style:{overflowX:"hidden",overflowY:"auto",width:"100%",height:"100%"}},r.a.createElement("div",{className:"heading"},r.a.createElement(U,{placeholder:"TODO title",text:e.content.title,onChange:function(t){return e.typeAPI.changeContent(e.id,Object(j.a)(Object(j.a)({},e.content),{},{title:t.target.value}))},onSave:function(t){return e.typeAPI.saveContent(e.id,Object(j.a)(Object(j.a)({},e.content),{},{title:t.target.value}))},margin:"7px 0px 0px 0px",bold:!0,sticky:!0,disabled:e.isLocked}),r.a.createElement("hr",{style:{marginTop:"0px",marginBottom:"7px"}})),r.a.createElement(S,{className:"custom_btn",isLocked:e.isLocked,handleClick:function(){e.typeAPI.saveContent(e.id,Object(j.a)(Object(j.a)({},e.content),{},{lastOrder:e.content.lastOrder+1,items:Object(j.a)(Object(j.a)({},e.content.items),{},Object(v.a)({},"todoitem"+(e.content.lastOrder+1),{checked:!1,text:"",order:e.content.lastOrder+1}))}))}},"+ add new"),r.a.createElement("div",{className:"todo-item-list",style:{overflowX:"hidden",overflowY:"auto"}},e.content.items?Object.entries(e.content.items).filter((function(e){var t=Object(E.a)(e,2),n=t[0];t[1];return"root"!==n})).sort((function(e,t){var n=Object(E.a)(e,2),a=(n[0],n[1]),r=Object(E.a)(t,2);r[0];return r[1].order-a.order})).map((function(n){var a=Object(E.a)(n,2),c=a[0],o=a[1];return r.a.createElement(ye,{key:c,itemID:c,text:o.text,checked:o.checked,order:o.order,onCheckToggle:function(e){return t(c,"checked",e)},onTextChange:function(t){return n=c,a="text",r=t,void e.typeAPI.changeContent(e.id,Object(j.a)(Object(j.a)({},e.content),{},{items:Object(j.a)(Object(j.a)({},e.content.items),{},Object(v.a)({},n,Object(j.a)(Object(j.a)({},e.content.items[n]),{},Object(v.a)({},a,r))))}));var n,a,r},onTextSave:function(e){return t(c,"text",e)},onDelete:function(){return t=c,void e.typeAPI.saveContent(e.id,Object(j.a)(Object(j.a)({},e.content),{},{items:Object(j.a)(Object(j.a)({},e.content.items),{},Object(v.a)({},t,null))}));var t},isLocked:e.isLocked})})):null))}));n(386);ce.a.registerPlugin(oe.a);var xe=r.a.memo((function(e){var t,n=Object(a.useState)(!1),c=Object(E.a)(n,2),o=c[0],i=c[1],l=Object(a.useState)(!1),u=Object(E.a)(l,2),s=u[0],d=u[1],m=function(e){switch(e){case"blank":return Oe;case"text":return je;case"todo":return we;case"VideoLink":return ue;case"video":case"VideoFile":return fe;case"image":return me;case"audio":return be;case"link":return ve;case"pdf":return de;case"file":return pe;default:return Oe}}(null===(t=e.card)||void 0===t?void 0:t.type,e.isLocked),h=Object(a.useRef)(null);return Object(a.useEffect)((function(){ce.a.to("#".concat(e.id),Object(j.a)(Object(j.a)({},e.card.size),{},{duration:.3}))}),[e.card.size.height,e.card.size.width]),Object(a.useEffect)((function(){ce.a.set("#".concat(e.id),Object(j.a)(Object(j.a)({opacity:1},e.card.position),{},{boxShadow:"0px 0px 0px 0px white"}))}),[e.id,e.card.position]),Object(a.useEffect)((function(){var t=oe.a.create("#".concat(e.id),{autoScroll:1,trigger:"#".concat(e.id),dragClickables:!o,onClick:function(){h.current.focus(),i(!0)},onDragStart:function(){d(!0),ce.a.to("#".concat(e.id),{boxShadow:"0 11px 15px -7px rgba(51, 61, 78, 0.2), 0 9px 46px 8px rgba(51, 61, 78, 0.12), 0 24px 38px 3px rgba(51, 61, 78, 0.14)",duration:.5})},onDrag:function(){console.log("now that was a drag")},onDragEnd:function(){d(!1),ce.a.to("#".concat(e.id),{boxShadow:"none",duration:.5}),e.genericAPI.savePosition(e.id,{x:this.x,y:this.y})},cursor:"grab",activeCursor:"grabbing"});return function(){return t[0].kill()}}),[o]),r.a.createElement("div",{id:e.id,tabIndex:0,className:(o?"generic-card active-card":"generic-card")+(s?" dragging-card":""),ref:h,onFocus:function(){return i(!0)},onBlur:function(){console.log("called blur"),i(!1)},onKeyDown:function(t){console.log("pressed ",t.key),"Delete"===t.key&&e.genericAPI.removeCard(e.id,"recursive")},style:{position:"absolute",opacity:0}},r.a.createElement("div",{style:{width:"100%",height:e.card.size.height,position:"absolute",top:0,boxShadow:"0 1px 2px 0 rgba(51,61,78,0.25)"}},r.a.createElement(m,{typeAPI:e.typeAPI,content:e.card.content,size:e.card.size,id:e.id,isLocked:e.isLocked})))})),ke=n(223);function Ce(e){return Object(a.useEffect)((function(){ke.a.to("#cursor".concat(e.id),{left:e.x,top:e.y-0,duration:.2}).play()}),[e.x,e.y,e.id]),r.a.createElement("div",{id:"cursor".concat(e.id),style:{position:"absolute",height:45,display:"flex",flexFlow:"column nowrap",justifyContent:"space-between",alignItems:"flex-start",overflow:"visible",zIndex:9999999999}},r.a.createElement("img",{alt:"cursor",src:n(387),style:{userSelect:"none",maxWidth:"25px",maxHeight:"25px"}}),r.a.createElement("div",{style:{marginLeft:10,paddingLeft:5,paddingRight:5,paddingBottom:2,paddingTop:2,backgroundColor:"darkorange",color:"white",fontSize:13,fontFamily:"sans-serif"}},e.name))}ce.a.registerPlugin(oe.a);var Ie=r.a.memo((function(e){var t,n=Object(a.useState)(!1),c=Object(E.a)(n,2),o=c[0],i=c[1];function l(e,t,n,a){var r=.1*Math.abs(n-e),c=e-r,o=n+r;return"M".concat(e," ").concat(t," C ").concat(c," ").concat(t," ").concat(o," ").concat(a," ").concat(n," ").concat(a)}return Object(a.useEffect)((function(){var t=oe.a.create("#nub".concat(e.id),{type:"top,left",activeCursor:"grab",onDragStart:function(){ce.a.set("#nub".concat(e.id),{top:e.tail.y,left:e.tail.x}),t[0].update()},onDrag:function(){i({x:this.x,y:this.y})},onDragEnd:function(){e.hits.forEach((function(n){t[0].hitTest("#".concat(n))&&(console.log("i hit",n),e.arrowAPI.reparentCard(e.id,n))})),t[0].update(),i(!1)}});return function(){console.log("about to kill a draggable"),t[0].kill()}}),[e.hits]),t=o?l(o.x,o.y,e.tail.x,e.tail.y):l(e.head.x,e.head.y,e.tail.x,e.tail.y-5),r.a.createElement("div",{style:{position:"absolute",height:0,width:0,top:0,left:0,overflow:"visible",zIndex:-1}},r.a.createElement("svg",{style:{position:"absolute",width:0,height:0,overflow:"visible"}},r.a.createElement("path",{strokeWidth:"3",fill:"none",stroke:"#ff8577",d:t})),r.a.createElement("svg",{style:{position:"absolute",overflow:"visible",width:0,height:0}},r.a.createElement("circle",{style:{position:"absolute"},id:"nub".concat(e.id),cx:o?o.x:e.tail.x,cy:o?o.y:e.tail.y,r:"5",stroke:"black",strokeWidth:"2px",fill:"#0fa958"})))})),Se=n(84);n(388);function De(e){var t=Object(a.useState)(1),n=Object(E.a)(t,2),c=n[0],o=n[1],i=Date.now();return r.a.createElement("div",{className:"card-container",style:{overflow:"scroll",position:"absolute",zIndex:1,width:"100vw"}},Object.keys(e.cards).length>1?r.a.createElement("input",{type:"range",min:"0.5",max:"2.5",defaultValue:"1",step:"0.1",onChange:function(e){return o(e.target.value)}}):null,r.a.createElement("div",{className:"container-filler",style:Object(j.a)(Object(j.a)({},e.container),{},{position:"absolute",zIndex:9999999,top:0,left:0,transformOrigin:"0% 0%",transform:"scale(".concat(c,")")}),onDoubleClick:function(t){if("card-container"!==t.target.offsetParent.className||e.isLocked)console.log("registered a double click on a card and did absolutely nothing about it");else{var n=Math.floor(t.clientX+t.target.offsetParent.scrollLeft),a=Math.floor(t.clientY+t.target.offsetParent.scrollTop);console.log("double click at",n,",",a),e.genericAPI.addChild({x:n,y:a},{width:310,height:200})}},onMouseMove:function(t){console.log("triggered mouse move"),t.persist(),e.containerAPI.saveCursorPosition(t.clientX+t.target.offsetParent.scrollLeft,t.clientY+t.target.offsetParent.scrollTop)}},e.cards?Object.entries(e.cards).filter((function(e){var t=Object(E.a)(e,2),n=t[0];t[1];return n&&"root"!==n})).map((function(t){var n=Object(E.a)(t,2),a=n[0],c=n[1];return r.a.createElement("div",{key:"wrapperdiv".concat(a)},r.a.createElement(Se.b,{id:"contextmenu".concat(a)},e.isLocked&&"blank"===(null===c||void 0===c?void 0:c.type)?null:r.a.createElement(xe,{key:a,id:a,card:c,genericAPI:e.genericAPI,typeAPI:e.typeAPI,isLocked:e.isLocked})),r.a.createElement(Se.a,{id:"contextmenu".concat(a),className:"card-context-menu"},r.a.createElement(Se.c,{onClick:function(){return e.isLocked?null:e.genericAPI.addChild({x:c.position.x+100,y:c.position.y+100},{width:c.size.width,height:c.size.height},a,"blank")}},"add child"),r.a.createElement(Se.c,{onClick:function(){return e.isLocked?null:e.genericAPI.removeCard(a,"recursive",c.parent)}},"delete")),c.parent&&"root"!==c.parent&&r.a.createElement(Ie,{key:"arrow".concat(a),id:"".concat(a),arrowAPI:e.arrowAPI,hits:Object.keys(e.cards),head:{x:e.cards[c.parent].position.x+e.cards[c.parent].size.width/2,y:e.cards[c.parent].position.y+e.cards[c.parent].size.height/2},tail:{x:c.position.x+c.size.width/2,y:c.position.y-5}}))})):r.a.createElement("p",null,"Double Click to Add a Card"),e.cursors?Object.entries(e.cursors).filter((function(t){var n=Object(E.a)(t,2),a=n[0],r=n[1];return a!==e.currentUser().uid&&i-Number(r.time)<6e4})).map((function(t){var n=Object(E.a)(t,2),a=n[0],c=n[1];return r.a.createElement(Ce,{key:a,id:a,name:c.name,x:c.x,y:c.y,projectID:e.projectID})})):null))}var Ue=n(134),Ae=n.n(Ue),Ne=function(e,t){var n={type:e,size:t,content:{text:"This is a ".concat(e," Card")}},a={type:e,size:t,content:{text:"This is a ".concat(e," Card")}},r={type:e,size:t,content:{text:"This is a ".concat(e," Card")}},c={type:e,size:t,content:{text:"This is a ".concat(e," Card")}},o={type:e,size:t,content:{text:"This is a ".concat(e," Card")}},i={type:e,size:t,content:{text:"This is a ".concat(e," Card")}},l={type:e,size:t,content:{text:"This is a ".concat(e," Card")}},u={type:e,size:t,content:{text:""}},s={type:e,size:t,content:{text:"This is a ".concat(e," Card")}},d={type:e,size:t,content:{title:"",lastOrder:0,items:{root:1}}};switch(e){case"text":return u;case"todo":return d;case"VideoLink":return a;case"VideoFile":return l;case"image":return i;case"audio":return n;case"link":return o;case"pdf":return r;case"file":return c;default:return s}};function Pe(e){var t=Object(a.useState)(!1),n=Object(E.a)(t,2),c=n[0],o=n[1],i=Object(a.useState)({width:600,height:800}),u=Object(E.a)(i,2),s=u[0],d=u[1],m=Object(a.useRef)({});m.current=s;var h=Object(a.useState)(),p=Object(E.a)(h,2),f=p[0],g=p[1],b=Object(a.useState)({}),O=Object(E.a)(b,2),y=O[0],C=O[1],I=Object(a.useState)(!0),D=Object(E.a)(I,2),U=D[0],A=D[1],N=Object(a.useState)(e.isOwner),P=Object(E.a)(N,2),T=P[0],z=P[1],F=Object(a.useState)(!e.isOwner),R=Object(E.a)(F,2),V=R[0],M=R[1],_=Object(a.useState)(e.permission),W=Object(E.a)(_,2),Y=W[0],B=W[1],q=Object(a.useState)(),G=Object(E.a)(q,2),H=G[0],$=(G[1],!0);"rw"===e.permission&&($=!1);var K=Object(a.useState)($),X=Object(E.a)(K,2),J=X[0],Z=X[1],Q=w.ref("documents/"+e.projectID+"/nodes"),ee=Object(l.h)(),te=Object(l.g)();e.currentUser().uid;console.log("CARD MANAGER STATE Existence ",U,"\n Owner ",V,"\n Shared ",T,"\n Permission Change ",Y,"\n isLocked ",J,"\n Chnaged Project Type :-",H),Object(a.useEffect)((function(){var t=e.currentUser().uid,n=w.ref("documents/"+e.projectID+"/"),a=w.ref("users/".concat(e.currentUser().uid,"/projects/"));return n.child("nodes").on("value",(function(e){console.log("triggered node listener, received payload",e.val()),C(e.val())})),n.child("center").on("value",(function(e){console.log("triggered center location listener, received payload",e.val())})),n.child("container").on("value",(function(e){console.log("triggered container size listener, received payload",e.val()),d(e.val())})),n.child("cursors").on("value",(function(e){console.log("cursors Details Triggered recieved payload",e.val()),e.val()&&g(e.val())})),n.child("/room/".concat(e.currentUser().uid,"/")).on("child_changed",(function(e){"permission"===e.key&&(console.log("Changed  In Permission :- ",e.val()),B(e.val()))})),a.on("child_removed",(function(t){t.key===e.projectID?(console.log("This Child is removed ",e.projectID),A(!1)):t.child(e.projectID).hasChild("shared")?(console.log("This Project is Shared"),M(!1),z(!0)):(A(!0),z(!1),M(!0))})),a.child(e.projectID).on("child_changed",(function(e){console.log(e.key," Is Changed under user tree"),"isLocked"===e.key&&Z(e.val())})),o(!0),function(){n.child("nodes").off(),n.child("center").off(),n.child("container").off(),n.child("cursors").off(),n.child("/room/".concat(t,"/")).off(),a.off(),a.child(e.projectID).off()}}),[]);var ne=function(e,t){C(Object(j.a)(Object(j.a)({},y),{},Object(v.a)({},e,Object(j.a)(Object(j.a)({},y[e]),{},{size:t})))),Q.child(e).child("size").set(t).then(console.log("set new size for",e,"to",t))},ae=function(e,t){Q.child(e).child("content").update(t).then(console.log("saved new content for",e)).catch((function(e){return console.log("Save COntent Error \n",t,"\n saveContent",e)}))},re=Object(a.useCallback)(Ae()(ae,3e3),[]),ce=function(e,t){if(console.log("reparent requested for",e,"newparent",t),function t(n){return"root"===n||n!==e&&t(y[n].parent)}(t)){var n={},a=y[e].parent;return n[e+"/parent"]=t,n[a+"/children/"+e]=null,n[t+"/children/"+e]=1,void Q.update(n).then(console.log("successfully changed the parent of",e,"from",a,"to",t)).catch((function(e){return console.log("error reparenting because",e)}))}console.log("didn't reparent because it was not a valid request")},oe=function(){te.push("/dashboard",{from:ee})},ie={savePosition:function(t,n){var a={},r={width:m.current.width,height:m.current.height},c=w.ref("documents/"+e.projectID);n.x>m.current.width&&(console.log("x",n.x,"was greater than width",m.current),r.width=n.x+300),n.y>m.current.height&&(console.log("y",n.y,"was greater than height",s.current),r.height=n.y+300),a["nodes/"+t+"/position/"]=n,r&&(a["container/"]=r),console.log("newcontainer: ",r,"old container: ",m.current),c.update(a).then(console.log("set new position for",t,"to",n,"\nresized container to",r))},changePosition:function(e,t){C(Object(j.a)(Object(j.a)({},y),{},Object(v.a)({},e,Object(j.a)(Object(j.a)({},y[e]),{},{position:t}))))},reparentCard:ce,removeCard:function(t,n,a){var r={};r[t]=null,r[y[t].parent+"/children/"+t]=null;switch(n){case"recursive":y[t].children&&function(e){for(;e.length>0;){var t=e.pop();r[t]=null,y[t].children&&e.concat(Object.keys(y[t].children))}}(Object.keys(y[t].children));break;case"reparent":Object.keys(y[t].children).forEach((function(e){return r[e+"/parent"]=a}))}var c=["link","blank","VideoLink","text"];if(console.log("Type Of Card ",y[t].type,"\n Exists Storage Types ",!c.includes(y[t].type,0)),c.includes(y[t].type,0))console.log("Its a NOn Storage Card");else{var o="root/"+e.projectID+"/"+t+"/";!function(e){var t=k().ref(e);t.listAll().then((function(e){e.items.length>0?e.items.forEach((function(e){var n,a;n=t.fullPath,a=e.name,k().ref(n).child(a).delete().then(console.log("File Deleted")).catch((function(e){return console.log("Error in Delete File",e)}))})):console.log("No Files Exist")})).catch((function(e){console.log("Error in List All",e)}))}(o)}Q.update(r).then(console.log("deleted",t,"successfully"))},addChild:function(e,t,n,a){var r,c=n||"root",o=a||"blank",i={type:o,size:t,position:e,content:{text:"This is a ".concat(o," Card")},parent:c},l=Q.push().key,u={};u[c+"/children/"+l]=1,u[l]=i,Q.update(u).then(console.log("Added a new child",l,"under",c)),C(Object(j.a)(Object(j.a)({},y),{},(r={},Object(v.a)(r,l,i),Object(v.a)(r,c,Object(j.a)(Object(j.a)({},y[c]),{},{children:Object(j.a)(Object(j.a)({},y[c].children),{},Object(v.a)({},l,1))})),r)))},resize:ne},le={saveContent:ae,changeContent:function(e,t){console.log("triggered local content change on",e),C(Object(j.a)(Object(j.a)({},y),{},Object(v.a)({},e,Object(j.a)(Object(j.a)({},y[e]),{},{content:t})))),re(e,t)},requestUpload:function(t,n,a,r){var c=Object(j.a)(Object(j.a)({},a),{},{customMetadata:Object(v.a)({},e.currentUser().uid,e.permission)});console.log("metadata sent was",c);var o="root/"+e.projectID+"/"+t,i=k().ref(o).put(n,c),l=i.on(k.TaskEvent.STATE_CHANGED,(function(e){return r(e.bytesTransferred/e.totalBytes*100,i)}),null,(function(){console.log(),r("complete"),l()}))},requestDownload:function(t,n){var a="root/"+e.projectID+"/"+t,r=k().ref(a);r.getDownloadURL().then((function(e){r.getMetadata().then((function(t){return n(e,JSON.parse(JSON.stringify(t)))})).catch((function(e){return console.log("failed to fetch metadata for",a,"because",e)}))})).catch((function(e){return console.log("failed to fetch download URL for",a,"because",e)}))},changeType:function(e,t,n){var a=Ne(t,n);C(Object(j.a)(Object(j.a)({},y),{},Object(v.a)({},e,Object(j.a)(Object(j.a)({},y[e]),{},{type:a.type,size:a.size,content:a.content}))));var r={};r[e+"/type"]=a.type,r[e+"/size"]=a.size,r[e+"/content"]=a.content,Q.update(r).then(console.log("Set new type for",e,"to \n",a)).catch((function(e){return e}))},resize:ne},ue={reparentCard:ce},se={saveCursorPosition:Object(a.useCallback)(Ae()((function(t,n){f&&w.ref("documents/"+e.projectID+"/cursors/").child(e.currentUser().uid).update({x:t,y:n,time:x}).then(console.log("Data Cursors Updated to DB")).catch((function(e){return console.log("send to DB Cursors Error",e)}))}),100),[f])};return r.a.createElement(r.a.Fragment,null,c?U?r.a.createElement(De,{container:s,cards:y,genericAPI:ie,typeAPI:le,arrowAPI:ue,permission:Y,currentUser:e.currentUser,containerAPI:se,cursors:f,projectID:e.projectID,isOwner:e.isOwner,isLocked:J}):r.a.createElement("div",null,r.a.createElement(L.a,{show:!U,onHide:oe},r.a.createElement(L.a.Header,{closeButton:!0},r.a.createElement(L.a.Title,null,"Alert Message of Project"),r.a.createElement(L.a.Body,null,"You have Been removed by owner from this project . Try to Contact the Owner."),r.a.createElement(L.a.Footer,null,r.a.createElement(S,{className:"custom_btn",handleClick:oe},"Close"))))):r.a.createElement("div",null,"Loading..."))}var Le=n(72),Te=function(){var e=Object(b.a)(g.a.mark((function e(t,n,a,r){var c,o,i,l,u,s,d,m;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=null===(c=Object(Le.auth)().currentUser)||void 0===c?void 0:c.uid,i="documents/".concat(t,"/users/"),void 0==n){e.next=14;break}return console.log("Permission in Search Child",n),e.next=6,ze(i,t,n,o);case 6:return l=e.sent,e.next=9,Fe(o,t,a,r,n);case 9:return u=e.sent,console.log("If User is Updated in User Tree ",u),e.abrupt("return",l);case 14:return e.next=16,w.ref("users/"+o+"/projects/"+t+"/shared").once("value").then((function(e){return e.exists()})).catch((function(e){return console.log("iS Owner Error",e)}));case 16:return s=e.sent,e.next=19,w.ref("documents/".concat(t,"/")).once("value").then((function(e){return e.exists()})).catch((function(e){return console.log("isCHild Error \n",e)}));case 19:return d=e.sent,e.next=22,w.ref(i).once("value").then((function(e){return d?e.hasChild(o)?e.child(o).val():e.hasChild("public")?e.child("public").val():null:null})).catch((function(e){return console.log("IschildinUsers Error \n",e)}));case 22:return m=e.sent,e.abrupt("return",[m,s]);case 24:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),ze=function(){var e=Object(b.a)(g.a.mark((function e(t,n,a,r){var c,o,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((c={})[t+r]=a,c["documents/".concat(n,"/cursors/").concat(r)]={name:Object(Le.auth)().currentUser.displayName},c["documents/".concat(n,"/room/")+r]={name:Object(Le.auth)().currentUser.displayName,photoURL:Object(Le.auth)().currentUser.photoURL,email:Object(Le.auth)().currentUser.email,permission:a},"r"!==a&&"rw"!==a){e.next=11;break}return o=C.httpsCallable("createNewProject"),i=o(c).then((function(e){return!0})).catch((function(e){return console.log(e)})),console.log("user Created",i),e.abrupt("return",i);case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),Fe=function(){var e=Object(b.a)(g.a.mark((function e(t,n,a,r,c){var o,i,l,u,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.ref("documents/"+n+"/metadata/").once("value").then((function(e){return console.log(e.val()),e.val()})).catch((function(e){return console.log("Updated In User Tree Error",e)}));case 2:return o=e.sent,i=!0,"rw"===c&&(i=!1),console.log("Project MEtadata \n",null===o||void 0===o?void 0:o.name),(l={})["users/"+t+"/projects/"+n+"/"]={access:c,name:null===o||void 0===o?void 0:o.name,thumbnailURL:null===o||void 0===o?void 0:o.thumbnailURL,isLocked:i,shared:{name:r,type:a}},l["creator/"+n]=t,u=C.httpsCallable("createNewProject"),s=u(l).then((function(e){return!0})).catch((function(e){return console.log(e)})),console.log("user Created",s),e.abrupt("return",s);case 13:case"end":return e.stop()}}),e)})));return function(t,n,a,r,c){return e.apply(this,arguments)}}(),Re=Te;var Ve=function(){var e=["Pulling up your document","Aligning some planets","Calibrating the vibe","Preparing some pixels"];return r.a.createElement("div",{className:"loader-container"},r.a.createElement("img",{className:"loader-animation",src:n(395),height:"60%",alt:"Loading"}),r.a.createElement("div",{className:"loader-text"},e[Math.floor(Math.random()*e.length)],"..."))},Me=(n(396),Ve);function _e(e){var t=Object(l.h)(),n=Object(l.g)(),c=Object(l.i)().projectID,o=Object(a.useState)(!1),i=Object(E.a)(o,2),u=i[0],s=i[1],d=Object(a.useState)(null),m=Object(E.a)(d,2),h=m[0],p=m[1],f=Object(a.useState)(),v=Object(E.a)(f,2),j=v[0],O=v[1];Object(a.useEffect)((function(){Object(b.a)(g.a.mark((function e(){var t,a,r,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Re(c);case 2:t=e.sent,a=Object(E.a)(t,2),r=a[0],o=a[1],console.log("Permission",r,o),setTimeout((function(){return s(!0)}),3500),null==r?n.push("/dashboard"):(p(r),O(o));case 9:case"end":return e.stop()}}),e)})))()}),[]);return u?r.a.createElement("div",null,r.a.createElement(ae,{style:{position:"absolute",zIndex:0},onLogOut:function(){return e.signOut(),r.a.createElement(l.a,{to:{pathname:"/login",state:{from:t}}})},currentUser:e.currentUser,document:h,projectID:c,isOwner:j}),null!=h?r.a.createElement(Pe,{projectID:c,currentUser:e.currentUser,permission:h,isOwner:j}):r.a.createElement("div",null)):r.a.createElement(Me,null)}var We={UI_CONFIG:{signInFlow:"popup",signInOptions:[y.GoogleAuthProvider.PROVIDER_ID,y.FacebookAuthProvider.PROVIDER_ID,y.EmailAuthProvider.PROVIDER_ID,y.PhoneAuthProvider.PROVIDER_ID],callbacks:{signInSuccessWithAuthResult:function(){return!1}}}};var Ye=n(58);function Be(e){var t=Object(l.h)(),n=Object(l.g)(),a=Object(l.i)(),c=a.projectID,o=a.permissionID,i=a.typeID,u=a.nameID;function s(e,t,n){return e.replace(new RegExp(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),n)}return r.a.useEffect((function(){Object(b.a)(g.a.mark((function e(){var a,r,l,d,m,h;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0!=o&&(d=s(o,"$","/"),m=s(i,"$","/"),h=s(u,"$","/"),a=Ye.AES.decrypt(d,"grpthink12!").toString(Ye.enc.Utf8),r=Ye.AES.decrypt(m,"grpthink12!").toString(Ye.enc.Utf8),l=Ye.AES.decrypt(h,"grpthink12!").toString(Ye.enc.Utf8)),e.next=3,Re(c,a,r,l);case 3:e.sent?n.push("/project/".concat(c)):n.push("/error",{from:t});case 5:case"end":return e.stop()}}),e)})))()}),[]),r.a.createElement("div",null,r.a.createElement(Me,null))}function qe(){var e=Object(l.h)();return r.a.createElement("div",null,"Invalid Link Enter :-",r.a.createElement("br",null),e.state.from.pathname)}var Ge=function(e){var t=e.path,n=e.children,a=e.isAuth,c=Object(h.a)(e,["path","children","isAuth"]);return console.log(t),r.a.createElement(l.b,Object.assign({},c,{render:function(e){var t=e.location;return a?n:r.a.createElement(l.a,{to:{pathname:"/login",state:{from:t}}})}}))};function He(){var e=function(){var e=y,t=We.UI_CONFIG,n=Object(a.useState)({isSignedIn:!1,pendingAuth:!0,user:null}),r=Object(E.a)(n,2),c=r[0],o=r[1];return Object(a.useEffect)((function(){var e=y().onAuthStateChanged((function(e){o({user:e,pendingAuth:!1,isSignedIn:!!e})}));return function(){return e()}}),[]),{auth:e,uiConfig:t,authState:c}}(),t=e.auth,n=e.uiConfig,c=e.authState;return!c.pendingAuth&&r.a.createElement(i.a,null,r.a.createElement(l.d,null,r.a.createElement(Ge,{isAuth:c.isSignedIn,path:"/project/:projectID/:permissionID/:typeID/:nameID"},r.a.createElement(Be,null)),r.a.createElement(p,{isAuth:c.isSignedIn,path:"/project/:projectID"},r.a.createElement(_e,{currentUser:function(){return t().currentUser},signOut:function(){return t().signOut()}})),r.a.createElement(l.b,{path:"/login"},r.a.createElement(m,{auth:t,uiConfig:n,authState:c})),r.a.createElement(p,{isAuth:c.isSignedIn,path:"/dashboard"},r.a.createElement(re,{currentUser:function(){return t().currentUser},signOut:function(){return t().signOut()}})),r.a.createElement(l.b,{path:"/error"},r.a.createElement(qe,null)),r.a.createElement(l.b,{path:"/"},r.a.createElement(u,{pendingAuth:c.pendingAuth,isAuth:c.isSignedIn}))))}var $e=r.a.createContext(),Ke=function(){return r.a.createElement("div",{className:"App"},r.a.createElement($e.Provider,{value:{appname:"groupthink"}},r.a.createElement(He,null)))};n(419);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Ke,null)),document.getElementById("root"))}},[[242,13,14]]]);