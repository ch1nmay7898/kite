(this.webpackJsonpgroupthink=this.webpackJsonpgroupthink||[]).push([[0],{203:function(e,t,n){},254:function(e,t,n){e.exports=n.p+"static/media/loader.05c141ad.svg"},271:function(e,t,n){e.exports=n(535)},276:function(e,t,n){},277:function(e,t,n){},289:function(e,t,n){},293:function(e,t,n){},294:function(e,t,n){},295:function(e,t,n){},296:function(e,t,n){},318:function(e,t){},320:function(e,t){},330:function(e,t){},332:function(e,t){},359:function(e,t){},360:function(e,t){},365:function(e,t){},367:function(e,t){},391:function(e,t){},429:function(e,t){},430:function(e,t){},431:function(e,t){},432:function(e,t){},433:function(e,t){},508:function(e,t,n){},509:function(e,t,n){e.exports=n.p+"static/media/jk.7c73557e.svg"},510:function(e,t,n){},535:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(27),o=n.n(c),i=(n(276),n(31)),l=n(20);n(277);function u(e){var t=Object(l.h)();return console.log("splashpage says: I was consulted",t),e.pendingAuth?r.a.createElement("div",{id:"splash"},r.a.createElement("h1",{id:"splashText"},"Welcome to groupthink!"),r.a.createElement("blockquote",null,"Unleash your ideas")):r.a.createElement(l.a,{to:{pathname:e.isAuth?"/dashboard":"/login",state:{from:t}}})}var s=n(228),d=n.n(s);n(289);function m(e){var t,n=Object(l.h)(),a="/dashboard";return void 0!=(null===(t=n.state)||void 0===t?void 0:t.from)&&(a=n.state.from.pathname),e.authState.isSignedIn?r.a.createElement(l.a,{to:{pathname:a,state:{from:n}}}):r.a.createElement("div",{id:"login"},r.a.createElement("h1",{id:"title"},"Groupthink"),r.a.createElement("div",{className:"row align-items-center h-100"},r.a.createElement("div",{className:"col-6"},r.a.createElement("img",{src:"https://picsum.photos/200?random=48"})),r.a.createElement("div",{className:"col-6"},r.a.createElement("div",{className:"landing-subtitle"},r.a.createElement("b",null,"Unleash your ideas like never before")),r.a.createElement("div",{className:"landing-text"},r.a.createElement("em",null,"groupthink")," is a real-time collaborative platform that brings the power of the web into a new type of document. Gone are the days of static, unidimensional word docs and spreadsheets. ",r.a.createElement("em",null,"groupthink")," is a live document that seamlessly integrates video, text, images, links, Tweets, Spotify playlists, Charts, and much more in an easy-to-use interface."),r.a.createElement("p",{id:"sign"},"Please sign-in:"),r.a.createElement(d.a,{uiConfig:e.uiConfig,firebaseAuth:e.auth()}))))}var p=n(89),h=function(e){e.path;var t=e.children,n=e.isAuth,a=Object(p.a)(e,["path","children","isAuth"]);return r.a.createElement(l.b,Object.assign({},a,{render:function(e){var a=e.location;return n?t:r.a.createElement(l.a,{to:{pathname:"/",state:{from:a}}})}}))},f=n(30),g=n(11),v=n(13),b=n(9);n(141),n(290),n(291),n(292);b.initializeApp({apiKey:"AIzaSyAjOQlUVvfpaPFKw_dsjVF-ZO9xAFFwLJc",authDomain:"groupthink-fc4b2.firebaseapp.com",databaseURL:"https://groupthink-fc4b2.firebaseio.com",projectId:"groupthink-fc4b2",storageBucket:"groupthink-fc4b2.appspot.com",messagingSenderId:"268412476509",appId:"1:268412476509:web:6a00e11a591b5852d4c1b4",measurementId:"G-94X9F74RYY"});var E=b.auth,j=b.database(),O=b.database.ServerValue.TIMESTAMP,y=b.storage,w=(b.storage().ref(),b.functions()),k={tester:{center:{x:300,y:300},container:{height:window.innerHeight,width:window.innerWidth},nodes:{root:{children:{dummy:1}}}}},x=r.a.memo((function(e){var t=e.handleClick,n=e.children,a=e.className,c=e.style;return r.a.createElement("button",{onClick:t,className:a,style:c},n)})),C=n(256);n(293);function I(e){return r.a.createElement(C.a,{className:"inline-input",placeholder:"Add a caption...",value:e.text,onChange:e.onChange,onBlur:e.onSave})}n(294),n(295);var P=r.a.memo((function(e){return e.addNew?r.a.createElement("div",{className:"project-card text_card"},r.a.createElement(x,{className:"",handleClick:e.onAddNew},"Add New Card")):r.a.createElement("div",{className:"project-card img_card"},r.a.createElement("img",{onClick:function(){return e.onOpen(e.id)},src:e.card.thumbnailURL,alt:"project thumbnail"}),r.a.createElement(I,{className:"project-card-item",text:e.card.name,onChange:function(t){return e.onChange(e.id,t.target.value)},onSave:function(){return e.onSave(e.id)}}),r.a.createElement(x,{className:"project-card-item",handleClick:function(){return e.onDelete(e.id)}},"Delete"))}));n(296);function S(e){var t=Object(l.g)(),n=Object(a.useState)(null),c=Object(v.a)(n,2),o=c[0],i=c[1],u="users/"+e.currentUser().uid+"/projects/";Object(a.useEffect)((function(){var t=j.ref("users/"+e.currentUser().uid+"/projects/");return t.on("value",(function(e){console.log("triggered listener and updated project list state, snapshot value was",e.val()),i(e.val())})),function(){return t.off("value")}}),[e]);var s=function(t){console.log("about to delete project",t);var n={};n["users/"+e.currentUser().uid+"/projects/"+t+"/"]=null,n["documents/"+t+"/"]=null,w.httpsCallable("createNewProject")(n).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}));!function e(t){console.log("Path TO Delete",t);var n=y().ref(t);n.listAll().then((function(t){t.prefixes.length>0||t.items.length>0?(t.items.length>0&&t.items.forEach((function(e){var t,a;t=n.fullPath,a=e.name,y().ref(t).child(a).delete().then(console.log("File Deleted"))})),t.prefixes.forEach((function(t){e(t.fullPath)}))):console.log("No Files Exist")})).catch((function(e){console.log(e)}))}("root/"+t+"/")},d=function(e){var t=o[e].name;console.log("about to rename project",e,", changing title to",t);var n={};n[u+e+"/name"]=t,n["documents/"+e+"/metadata/name"]=t,j.ref().update(n).then(console.log("successfully renamed project",e,"to",t))},m=function(e){console.log("attempting to open project",e),t.push("/project/"+e)},p=function(e,t){console.log("un-finalized text change in",e,". new text:",t),console.log(Object(g.a)(Object(g.a)({},o),{},Object(f.a)({},e,Object(g.a)(Object(g.a)({},o[e]),{},{name:t})))),i(Object(g.a)(Object(g.a)({},o),{},Object(f.a)({},e,Object(g.a)(Object(g.a)({},o[e]),{},{name:t}))))};return r.a.createElement("div",{id:"project-card-container"},r.a.createElement(P,{addNew:!0,onAddNew:function(){console.log("clicked add new");var t=j.ref().child(u).push().key,n={};n["creator/"+t]=e.currentUser().uid,n[u+t]={access:"rw",name:"New Project",thumbnailURL:"https://picsum.photos/200?random="+Math.floor(100*Math.random())},n["documents/"+t]=Object(g.a)({metadata:{name:"New Project",datecreated:O},users:Object(f.a)({},e.currentUser().uid,"rw")},k.tester),w.httpsCallable("createNewProject")(n).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}))}}),o?Object.entries(o).map((function(e){var t=Object(v.a)(e,2),n=t[0],a=t[1];return r.a.createElement(P,{key:n,id:n,card:a,onChange:p,onSave:d,onDelete:s,onOpen:m})})):null)}var A=n(25),N=n.n(A),z=n(47),D=n(564),U=n(129),_=n(230),T=n(552),F=n(553),R=n(554),L=n(555),M=n(556),q=n(557),V=n(558),G=n(559),W=n(560),Y=n(561),B=n(562),$=n(563),X=function(e){var t=e.url,n=e.title,a=e.size,c=Object(_.Passers)({url:t,className:"network__share-button"})({className:"network cursor-pointer hover transition--default",title:"Share ".concat(t)})("li");return r.a.createElement("div",{className:"social_link"},r.a.createElement(c,null,r.a.createElement(T.a,{quote:n},r.a.createElement(F.a,{size:a})),r.a.createElement(R.a,{title:n},r.a.createElement(L.a,{size:a})),r.a.createElement(M.a,{title:n,separator:":: "},r.a.createElement(q.a,{size:a})),r.a.createElement(V.a,{title:n,windowWidth:750,windowHeight:600},r.a.createElement(G.a,{size:a})),r.a.createElement(W.a,{url:String(window.location),windowWidth:1e3,windowHeight:730},r.a.createElement(Y.a,{size:a})),r.a.createElement(B.a,{subject:"Groupthink Web Link",body:"Here is the link ".concat(t)},r.a.createElement($.a,{size:a}))))},H=n(130),J=(n(203),function(){var e=Object(z.a)(N.a.mark((function e(t,n){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a={})["documents/".concat(t,"/room/")+n]={X_POS:0,Y_POS:0},e.next=4,j.ref().update(a).then(console.log("Created ROOM")).catch((function(e){return e}));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),K=function(e){var t=Object(a.useState)(!1),n=Object(v.a)(t,2),c=n[0],o=n[1],i=Object(a.useState)(!1),l=Object(v.a)(i,2),u=l[0],s=l[1],d=Object(a.useState)(),m=Object(v.a)(d,2),p=m[0],h=m[1],f=Object(a.useState)(),g=Object(v.a)(f,2),b=g[0],E=g[1],O=Object(a.useState)(),y=Object(v.a)(O,2),w=y[0],k=y[1];var C=function(e){E(e.target.value)},I=function(e){h(e.target.value)},P=function(){o(!1),s(!1),k(null),h(null),E(null)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(x,{handleClick:function(){return o(!0)}},"Share"),r.a.createElement(D.a,{show:c,onHide:P},r.a.createElement(D.a.Header,{closeButton:!0},r.a.createElement(D.a.Title,null,"Share Your Project")),r.a.createElement(D.a.Body,null,"Type Of Link To be Shared",r.a.createElement("br",null),r.a.createElement("input",{type:"radio",name:"linkType",value:"public",onChange:function(e){return I(e)},required:!0}),r.a.createElement("label",{htmlFor:"male"},"Public"),r.a.createElement("input",{type:"radio",name:"linkType",value:"private",onChange:function(e){return I(e)},required:!0}),r.a.createElement("label",{htmlFor:"male"},"Private "),r.a.createElement("br",null),r.a.createElement("input",{type:"radio",name:"options",value:"r",onChange:function(e){return C(e)},required:!0}),r.a.createElement("label",{htmlFor:"male"},"Read Only"),r.a.createElement("input",{type:"radio",name:"options",value:"rw",onChange:function(e){return C(e)},required:!0}),r.a.createElement("label",{htmlFor:"male"},"Read and Write "),r.a.createElement("br",null),r.a.createElement(x,{className:"custom_btn",handleClick:function(){if(void 0!=p&&void 0!=b)if(s(!0),"private"===p){J(e.projectID,e.currentUser.uid).then("Room Made").catch((function(e){return e}));var t=H.encrypt(b,"grpthink12!").toString(),n=(a="/",r="$",t.replace(new RegExp(a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),r));console.log(t,b,n),k(String(window.location)+"/"+n)}else!function(e,t,n){var a="documents/".concat(e,"/"),r={};r[a+"/users/public"]=t,r[a+"/room/"+n]={X_POS:0,Y_POS:0},j.ref().update(r).then(console.log("Created Public With Permission",t))}(e.projectID,b,e.currentUser.uid),k(String(window.location));else s(!1);var a,r}},"Generate Link"),u?r.a.createElement("div",null,r.a.createElement("br",null),"Copy Your Link :",r.a.createElement("br",null),r.a.createElement("b",{style:{display:"inline-flex"}},w),r.a.createElement("br",null),r.a.createElement(X,{url:w,title:"Groupthink Website",size:"2.5rem"})):r.a.createElement("div",null)),r.a.createElement(D.a.Footer,null,r.a.createElement(x,{className:"custom_btn",handleClick:P},"Close"),r.a.createElement(x,{className:"custom_btn",handleClick:P},"Save Changes"))))};function Q(e){var t=e.currentUser();return r.a.createElement("div",{className:"menu-bar topheader"},r.a.createElement("div",{className:"menu-bar-panel menu-bar-panel-left"},r.a.createElement("img",{alt:"",className:"menu-bar-user-profile-picture",src:t.photoURL}),t.displayName),r.a.createElement("div",{className:"menu-bar-panel menu-bar-panel-center"},r.a.createElement("div",{className:"menu-bar-site-title"},"groupthink")),r.a.createElement("div",null,r.a.createElement(i.b,{to:"/dashboard"},"Back")),r.a.createElement("div",{className:"menu-bar-panel menu-bar-panel-right"},r.a.createElement(x,{className:"logout-button custom_btn",handleClick:e.onLogOut},"log out")),void 0!=e.document&&"rw"===e.document?r.a.createElement(K,{projectID:e.projectID,className:"custom_btn",currentUser:t}):r.a.createElement("div",null))}function Z(e){var t=Object(l.h)();return r.a.createElement("div",null,r.a.createElement(Q,{onLogOut:function(){return e.signOut(),r.a.createElement(l.a,{to:{pathname:"/dashboard",state:{from:t}}})},currentUser:e.currentUser}),r.a.createElement(S,{currentUser:e.currentUser}))}var ee=n(136),te=n(226),ne=n(88),ae=n.n(ne),re=r.a.memo((function(e){var t,n,a;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"text-node"},r.a.createElement(I,{onChange:function(t){return n=t,e.typeAPI.changeContent(e.id,{url:n.target.value});var n},onSave:function(){return e.typeAPI.saveContent(e.id,{url:e.content.url})},text:(null===(t=e.content)||void 0===t?void 0:t.url)||e.content.text,lwidth:"100px"})),(a=null===(n=e.content)||void 0===n?void 0:n.url,new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(a)?r.a.createElement("div",null,r.a.createElement(ae.a,{url:e.content.url,controls:!0})):null))})),ce=n(78),oe=(n(434),n(435),r.a.memo((function(e){var t=Object(a.useState)(!1),n=Object(v.a)(t,2),c=n[0],o=n[1],i=Object(a.useState)(null),l=Object(v.a)(i,2),u=l[0],s=l[1],d=Object(a.useState)(1),m=Object(v.a)(d,2),p=m[0],h=m[1];ce.c.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(ce.c.version,"/pdf.worker.js");return r.a.createElement("div",null,c?"upload progress: "+c:"not uploading",r.a.createElement("input",{type:"file",accept:"application/pdf,application/vnd.ms-excel",onChange:function(t){return function(t){var n=t.target.files[0],a={contentType:n.type},r=e.id+"/"+n.lastModified;console.log("path sent from audio:",r),e.typeAPI.requestUpload(r,n,a,(function(t){console.log(t),"complete"===t?(o("uploaded"),e.typeAPI.requestDownload(r,(function(t,n){return e.typeAPI.saveContent(e.id,{url:t,metadata:n})}))):o(t)}))}(t)}}),e.content.url?r.a.createElement("div",{key:e.content.metadata.name},"File Name : ",e.content.metadata.name,r.a.createElement("div",{key:e.content.metadata.name},r.a.createElement("nav",null,r.a.createElement("button",{onClick:function(){h(p>1?p-1:u-1)}},"Prev"),r.a.createElement("button",{onClick:function(){h(p+1)}},"Next")),r.a.createElement(ce.a,{file:e.content.url,onLoadSuccess:function(e){var t=e.numPages;s(t)}},r.a.createElement(ce.b,{pageNumber:p})),r.a.createElement("p",null,"Page ",p," of ",u))):null)}))),ie=n(236),le=n(92),ue=r.a.memo((function(e){var t=Object(a.useState)(!1),n=Object(v.a)(t,2),c=n[0],o=n[1],i=Object(a.useState)(0),l=Object(v.a)(i,2),u=l[0],s=l[1],d=Object(a.useState)(!1),m=Object(v.a)(d,2),p=m[0],h=m[1],f=Object(a.useCallback)((function(e,t){t.photo;var n=t.index;s(n),h(!0)}),[]);return r.a.createElement("div",null,c?"upload progress: "+c:"not uploading",r.a.createElement("input",{type:"file",accept:"image/x-png,image/gif,image/jpeg,image/svg,".concat("image/*"),onChange:function(t){return function(t){var n=t.target.files[0],a={contentType:n.type},r=e.id+"/"+n.lastModified;console.log("path sent from audio:",r),e.typeAPI.requestUpload(r,n,a,(function(t){console.log(t),"complete"===t?(o("uploaded"),e.typeAPI.requestDownload(r,(function(t,n){return e.typeAPI.saveContent(e.id,{url:t,metadata:n})}))):o(t)}))}(t)}}),e.content.url?r.a.createElement("div",{key:e.content.metadata.name},"File Name : ",e.content.metadata.name,r.a.createElement(ie.a,{photos:[{src:"".concat(e.content.url),width:6,height:7}],onClick:f}),r.a.createElement(le.b,null,p?r.a.createElement(le.a,{onClose:function(){s(0),h(!1)}},r.a.createElement(le.c,{currentIndex:u,views:[{src:"".concat(e.content.url),width:6,height:7}].map((function(e){return Object(g.a)(Object(g.a)({},e),{},{srcset:e.srcSet,caption:e.title})}))})):null)):null)})),se=r.a.memo((function(e){var t=Object(a.useState)(!1),n=Object(v.a)(t,2),c=n[0],o=n[1];return console.log("Metadat FileCard",e.content.metadata),r.a.createElement("div",null,c?"upload progress: "+c:"not uploading",r.a.createElement("input",{type:"file",accept:".odt,.doc,.docx,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document",onChange:function(t){return function(t){var n=t.target.files[0],a={contentType:n.type},r=e.id+"/"+n.lastModified;console.log("path sent from audio:",r),e.typeAPI.requestUpload(r,n,a,(function(t){console.log(t),"complete"===t?(o("uploaded"),e.typeAPI.requestDownload(r,(function(t,n){return e.typeAPI.saveContent(e.id,{url:t,metadata:n})}))):o(t)}))}(t)}}),e.content.url?r.a.createElement("div",{key:e.content.metadata.name},"File Name :",r.a.createElement("a",{href:e.content.url,target:"_blank"},e.content.metadata.name)):null)})),de=r.a.memo((function(e){var t=Object(a.useState)(!1),n=Object(v.a)(t,2),c=n[0],o=n[1];return r.a.createElement("div",null,c?"upload progress: "+c:"not uploading",r.a.createElement("input",{type:"file",accept:"video/* ",onChange:function(t){return function(t){var n=t.target.files[0],a={contentType:n.type},r=e.id+"/"+n.lastModified;console.log("path sent from audio:",r),e.typeAPI.requestUpload(r,n,a,(function(t){console.log(t),"complete"===t?(o("uploaded"),e.typeAPI.requestDownload(r,(function(t,n){return e.typeAPI.saveContent(e.id,{url:t,metadata:n})}))):o(t)}))}(t)}}),e.content.url?r.a.createElement("div",{key:e.content.metadata.name},"File Name : ",e.content.metadata.name,r.a.createElement(ae.a,{controls:!0,url:e.content.url})):null)})),me=n(255),pe=(n(507),r.a.memo((function(e){var t=Object(a.useState)(!1),n=Object(v.a)(t,2),c=n[0],o=n[1];return r.a.createElement("div",null,c?"upload progress: "+c:"not uploading",r.a.createElement("input",{type:"file",accept:"audio/* ",onChange:function(t){return function(t){var n=t.target.files[0],a={contentType:n.type},r=e.id+"/"+n.lastModified;console.log("path sent from audio:",r),e.typeAPI.requestUpload(r,n,a,(function(t){console.log(t),"complete"===t?(o("uploaded"),e.typeAPI.requestDownload(r,(function(t,n){return e.typeAPI.saveContent(e.id,{url:t,metadata:n})}))):o(t)}))}(t)}}),e.content.url?r.a.createElement("div",{key:e.content.metadata.name},"File Name : ",e.content.metadata.name,r.a.createElement(me.a,{src:e.content.url,showDownloadProgress:"false",preload:"metadata"})):null)}))),he=n(251),fe=r.a.memo((function(e){var t,n,a=function(e){return!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"text-node"},r.a.createElement(I,{onChange:function(t){return n=t,e.typeAPI.changeContent(e.id,{url:n.target.value});var n},onSave:function(){return a(e.content.url)?e.typeAPI.saveContent(e.id,{url:e.content.url}):null},text:(null===(t=e.content)||void 0===t?void 0:t.url)||e.content.text,lwidth:"100px"})),a(null===(n=e.content)||void 0===n?void 0:n.url)?r.a.createElement("div",{style:{boxShadow:"2px 4px 21px 9px darkgrey",marginTop:"22px"}},r.a.createElement(he.ReactTinyLink,{cardSize:"small",showGraphic:!0,maxLine:2,minLine:1,url:e.content.url})):null)}));var ge=r.a.memo((function(e){return r.a.createElement("div",{className:"text-node"},r.a.createElement(I,{onChange:function(t){return n=t,e.typeAPI.changeContent(e.id,{text:n.target.value});var n},onSave:function(){return e.typeAPI.saveContent(e.id,{text:e.content.text})},text:e.content.text,lwidth:"100px"}))}));var ve=r.a.memo((function(e){return r.a.createElement("div",{className:"button_link"},["text","image","VideoLink","VideoFile","link","audio","pdf","file"].map((function(t){return r.a.createElement(x,{handleClick:function(){return e.typeAPI.changeType(e.id,t)}},t)})))}));n(508);ee.a.registerPlugin(te.a);var be=r.a.memo((function(e){var t,n=function(e){switch(console.log(e),e){case"blank":return ve;case"text":return ge;case"VideoLink":return re;case"VideoFile":return de;case"image":return ue;case"audio":return pe;case"link":return fe;case"pdf":return oe;case"file":return se;default:return ve}}(null===(t=e.card)||void 0===t?void 0:t.type);return Object(a.useEffect)((function(){ee.a.set("#".concat(e.id),Object(g.a)({opacity:1},e.card.position))}),[e.id,e.card.position]),Object(a.useEffect)((function(){var t=te.a.create("#".concat(e.id),{autoScroll:1,trigger:"#handle".concat(e.id),onDrag:function(){console.log("now that was a drag"),this.update()},onDragEnd:function(){e.genericAPI.savePosition(e.id,{x:this.x,y:this.y})}});return function(){return t[0].kill()}}),[]),r.a.createElement("div",{id:e.id,className:"card custom_card border-0",style:{width:350,height:200,position:"absolute",opacity:0}},r.a.createElement("div",{id:"handle".concat(e.id),className:"card-handle card-title-bar"},r.a.createElement("button",{className:"absolute delete_btn wh-20p rounded-circle",onClick:function(){return e.genericAPI.removeCard(e.id,"recursive",e.card.parent)}},"X"),r.a.createElement("button",{className:"absolute lock_btn wh-20p rounded-circle"},r.a.createElement("i",{className:"fa fa-lock","aria-hidden":"true"})),r.a.createElement("button",{className:"absolute add_btn wh-20p",onClick:function(){return e.genericAPI.addChild({x:e.card.position.x+100,y:e.card.position.y+100},{width:300,height:300},e.id,"blank")}},r.a.createElement("span",{className:"rounded-circle"},"+"))),r.a.createElement(n,{typeAPI:e.typeAPI,content:e.card.content,id:e.id}))})),Ee=n(252);function je(e){return Ee.a.to("#".concat(e.id),{x:e.x,y:e.y,duration:.8}).play(),console.log("props",e.x),r.a.createElement("div",{id:e.id,style:{position:"absolute",width:40,height:40,display:"flex",flexFlow:"column nowrap",justifyContent:"space-between"}},r.a.createElement("img",{alt:"cursor",src:n(509),width:"25px",height:"25px",style:{userSelect:"none"}}),r.a.createElement("div",{style:{border:"1px dashed black",height:10,fontSize:8}},e.name))}function Oe(e){return r.a.createElement("div",{className:"card-container w-100 main_card",style:{overflow:"scroll",position:"absolute",zIndex:1}},r.a.createElement("div",{className:"container-filler",style:Object(g.a)(Object(g.a)({},e.container),{},{position:"absolute",zIndex:9999999}),onDoubleClick:function(t){var n=t.target.getBoundingClientRect(),a=Math.floor(t.clientX-n.left),r=Math.floor(t.clientY-n.top);console.log("double click at",a,",",r),e.genericAPI.addChild({x:a,y:r},{width:200,height:300})},onMouseMove:function(t){console.log("triggered mouse move"),t.persist(),e.containerAPI.sendToDatabase(t)}},e.cards?Object.entries(e.cards).filter((function(e){var t=Object(v.a)(e,2),n=t[0];t[1];return n&&"root"!==n})).map((function(t){var n=Object(v.a)(t,2),a=n[0],c=n[1];return r.a.createElement(be,{key:a,id:a,card:c,genericAPI:e.genericAPI,typeAPI:e.typeAPI})})):r.a.createElement("p",null,"Double Click to Add a Card"),void 0!=e.room?Object.entries(e.room).filter((function(t){var n=Object(v.a)(t,2),a=n[0];n[1];return a!==e.currentUser().uid})).map((function(t){var n=Object(v.a)(t,2),a=(n[0],n[1]);return r.a.createElement(je,{key:e.currentUser().uid,id:e.currentUser().uid,name:e.currentUser().displayName,x:a.x,y:a.y})})):null))}var ye=n(253),we=n.n(ye),ke={type:"audio",size:{height:300,width:400},content:{text:"This is a Audio Card"}},xe={type:"VideoLink",size:{height:300,width:400},content:{text:"This is a Video Link  Card"}},Ce={type:"pdf",size:{height:300,width:400},content:{text:"This is a pdf Card"}},Ie={type:"file",size:{height:300,width:400},content:{text:"This is a file Card"}},Pe={type:"link",size:{height:300,width:400},content:{text:"This is a link Card"}},Se={type:"image",size:{height:300,width:400},content:{text:"This is a image Card"}},Ae={type:"VideoFile",size:{height:300,width:400},content:{text:"This is a VideoFile Card"}},Ne={type:"text",size:{height:300,width:400},content:{text:"This is a text Card"}},ze={type:"text",size:{height:300,width:400},content:{text:"This is a text Card"}},De=function(e){switch(e){case"text":return Ne;case"VideoLink":return xe;case"VideoFile":return Ae;case"image":return Se;case"audio":return ke;case"link":return Pe;case"pdf":return Ce;case"file":return Ie;default:return ze}};function Ue(e){var t=Object(a.useState)(!1),n=Object(v.a)(t,2),c=n[0],o=n[1],i=Object(a.useState)({width:600,height:800}),l=Object(v.a)(i,2),u=l[0],s=l[1],d=Object(a.useRef)({});d.current=u;var m=Object(a.useState)(),p=Object(v.a)(m,2),h=p[0],b=p[1],E=Object(a.useState)({}),O=Object(v.a)(E,2),w=O[0],k=O[1],x=j.ref("documents/"+e.projectID+"/nodes");Object(a.useEffect)((function(){var t=j.ref("documents/"+e.projectID);return t.child("nodes").on("value",(function(e){console.log("triggered node listener, received payload",e.val()),k(e.val())})),t.child("center").on("value",(function(e){console.log("triggered center location listener, received payload",e.val())})),t.child("container").on("value",(function(e){console.log("triggered container size listener, received payload",e.val()),s(e.val())})),t.child("room").on("value",(function(e){console.log("Room Details Triggered recieved payload",e.val()),b(e.val())})),o(!0),function(){t.child("nodes").off(),t.child("center").off(),t.child("container").off()}}),[]);var C=function(e,t){console.log("triggered local content change on",e),k(Object(g.a)(Object(g.a)({},w),{},Object(f.a)({},e,Object(g.a)(Object(g.a)({},w[e]),{},{content:t}))))},I=Object(a.useCallback)(we()((function(t){void 0!=h&&j.ref("documents/"+e.projectID+"/room/").child(e.currentUser().uid).set({x:t.clientX,y:t.clientY})}),100),[h]),P={savePosition:function(t,n){var a={},r={width:d.current.width,height:d.current.height},c=j.ref("documents/"+e.projectID);n.x>d.current.width&&(console.log("x",n.x,"was greater than width",d.current),r.width=n.x+300),n.y>d.current.height&&(console.log("y",n.y,"was greater than height",u.current),r.height=n.y+300),a["nodes/"+t+"/position/"]=n,r&&(a["container/"]=r),console.log("newcontainer: ",r,"old container: ",d.current),c.update(a).then(console.log("set new position for",t,"to",n,"\nresized container to",r))},changePosition:function(e,t){k(Object(g.a)(Object(g.a)({},w),{},Object(f.a)({},e,Object(g.a)(Object(g.a)({},w[e]),{},{position:t}))))},reparentCard:function(e,t){var n={},a=w[e].parent;n[e+"/parent"]=t,n[a+"/children/"+e]=null,n[t+"/children/"+e]=1,x.update(n).then(console.log("successfully changed the parent of",e,"from",a,"to",t)).catch(console.log("error reparenting"))},removeCard:function(e,t,n){var a={};a[e]=null,a[w[e].parent+"/children/"+e]=null;switch(t){case"recursive":w[e].children&&function(e){for(;e.length>0;){var t=e.pop();a[t]=null,w[t].children&&e.concat(Object.keys(w[t].children))}}(Object.keys(w[e].children));break;case"reparent":Object.keys(w[e].children).forEach((function(e){return a[e+"/parent"]=n}))}x.update(a).then(console.log("deleted",e,"successfully"))},addChild:function(e,t,n,a){var r,c=n||"root",o=a||"blank",i={type:o,size:t,position:e,content:{text:"This is a ".concat(o," Card")},parent:c},l=x.push().key,u={};u[c+"/children/"+l]=1,u[l]=i,x.update(u).then(console.log("Added a new child",l,"under",c)),k(Object(g.a)(Object(g.a)({},w),{},(r={},Object(f.a)(r,l,i),Object(f.a)(r,c,Object(g.a)(Object(g.a)({},w[c]),{},{children:Object(g.a)(Object(g.a)({},w[c].children),{},Object(f.a)({},l,1))})),r)))},resize:function(e,t){k(Object(g.a)(Object(g.a)({},w),{},Object(f.a)({},e,Object(g.a)(Object(g.a)({},w[e]),{},{size:t})))),x.child(e).child("size").set(t).then(console.log("set new size for",e,"to",t))}},S={saveContent:function(e,t){C(e,t),x.child(e).child("content").set(t).then(console.log("saved new content for",e))},changeContent:C,requestUpload:function(t,n,a,r){var c=Object(g.a)(Object(g.a)({},a),{},{customMetadata:Object(f.a)({},e.currentUser().uid,e.permission)});console.log("metadata sent was",c);var o="root/"+e.projectID+"/"+t,i=y().ref(o).put(n,c).on(y.TaskEvent.STATE_CHANGED,(function(e){return r(e.bytesTransferred/e.totalBytes*100)}),null,(function(){console.log(),r("complete"),i()}))},requestDownload:function(t,n){var a="root/"+e.projectID+"/"+t,r=y().ref(a);r.getDownloadURL().then((function(e){r.getMetadata().then((function(t){return n(e,JSON.parse(JSON.stringify(t)))})).catch((function(e){return console.log("failed to fetch metadata for",a,"because",e)}))})).catch((function(e){return console.log("failed to fetch download URL for",a,"because",e)}))},changeType:function(e,t){var n=De(t);k(Object(g.a)(Object(g.a)({},w),{},Object(f.a)({},e,Object(g.a)(Object(g.a)({},w[e]),{},{type:n.type,size:n.size,content:n.content}))));var a={};a[e+"/type"]=n.type,a[e+"/size"]=n.size,a[e+"/content"]=n.content,x.update(a).then(console.log("Set new type for",e,"to \n",n)).catch((function(e){return e}))}},A={sendToDatabase:I};return c?r.a.createElement(Oe,{container:u,cards:w,genericAPI:P,typeAPI:S,permission:e.permission,currentUser:e.currentUser,containerAPI:A,room:h}):r.a.createElement("div",null,"Loading...")}var _e=function(){var e=Object(z.a)(N.a.mark((function e(t,n,a,r){var c,o,i;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((c={})[t+r]=a,c["documents/".concat(n,"/room/")+r]={X_POS:0,Y_POS:0},"r"!==a&&"rw"!==a){e.next=10;break}return o=w.httpsCallable("createNewProject"),i=o(c).then((function(e){return!0})).catch((function(e){return console.log(e)})),console.log("user Created",i),e.abrupt("return",i);case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),Te=function(){var e=Object(z.a)(N.a.mark((function e(t,n){var a,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a={})["documents/".concat(t,"/room/")+n]={X_POS:0,Y_POS:0},e.next=4,j.ref().update(a).then(console.log("Created ROOM")).catch((function(e){return e}));case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Fe=function(){var e=Object(z.a)(N.a.mark((function e(t,n){var a,r,c,o,i,l;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null===(a=Object(U.auth)().currentUser)||void 0===a?void 0:a.uid,e.next=3,j.ref("documents/".concat(t,"/")).once("value").then((function(e){return e.exists()})).catch((function(e){return e}));case 3:return c=e.sent,o="documents/".concat(t,"/users/"),e.next=7,j.ref(o).once("value").then((function(e){if(!c)return null;if(e.hasChild(r))return e.child(r).val();if(e.hasChild("public")){var n=Te(t,r).then((function(e){return e})).catch((function(e){return e}));return console.log(n),e.child("public").val()}return null})).catch((function(e){return e}));case 7:if(i=e.sent,void 0==n){e.next=16;break}return console.log(n),e.next=12,_e(o,t,n,r);case 12:return l=e.sent,e.abrupt("return",l);case 16:return e.abrupt("return",i);case 17:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Re=n(254),Le=n.n(Re);var Me=function(){return r.a.createElement("div",null,r.a.createElement("img",{src:Le.a,className:"loader",alt:""}))},qe=(n(510),Me);function Ve(e){var t=Object(l.h)(),n=Object(l.g)(),c=Object(l.i)().projectID,o=Object(a.useState)(!1),i=Object(v.a)(o,2),u=i[0],s=i[1],d=Object(a.useState)(null),m=Object(v.a)(d,2),p=m[0],h=m[1];Object(a.useEffect)((function(){Object(z.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fe(c);case 2:t=e.sent,console.log("Permission",t),s(!0),null==t?n.push("/dashboard"):h(t);case 6:case"end":return e.stop()}}),e)})))()}),[]);return u?r.a.createElement("div",null,r.a.createElement(Q,{style:{position:"absolute",zIndex:0},onLogOut:function(){return e.signOut(),r.a.createElement(l.a,{to:{pathname:"/login",state:{from:t}}})},currentUser:e.currentUser,document:p,projectID:c}),null!=p?r.a.createElement(Ue,{projectID:c,currentUser:e.currentUser,permission:p}):r.a.createElement("div",null)):r.a.createElement(qe,null)}var Ge={UI_CONFIG:{signInFlow:"popup",signInOptions:[E.GoogleAuthProvider.PROVIDER_ID,E.FacebookAuthProvider.PROVIDER_ID,E.EmailAuthProvider.PROVIDER_ID,E.PhoneAuthProvider.PROVIDER_ID],callbacks:{signInSuccessWithAuthResult:function(){return!1}}}};var We=n(137);function Ye(e){var t=Object(l.h)(),n=Object(l.g)(),a=Object(l.i)(),c=a.projectID,o=a.permissionID;return r.a.useEffect((function(){Object(z.a)(N.a.mark((function e(){var a,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0!=o&&(i="$",l="/",r=o.replace(new RegExp(i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),l),a=We.AES.decrypt(r,"grpthink12!").toString(We.enc.Utf8),console.log("Permission ID DEcrypt",a,o,r)),e.next=3,Fe(c,a);case 3:e.sent?n.push("/project/".concat(c)):n.push("/error",{from:t});case 5:case"end":return e.stop()}var i,l}),e)})))()}),[]),r.a.createElement("div",null,r.a.createElement(qe,null))}function Be(){var e=Object(l.h)();return r.a.createElement("div",null,"Invalid Link Enter :-",r.a.createElement("br",null),e.state.from.pathname)}var $e=function(e){var t=e.path,n=e.children,a=e.isAuth,c=Object(p.a)(e,["path","children","isAuth"]);return console.log(t),r.a.createElement(l.b,Object.assign({},c,{render:function(e){var t=e.location;return a?n:r.a.createElement(l.a,{to:{pathname:"/login",state:{from:t}}})}}))};function Xe(){var e=function(){var e=E,t=Ge.UI_CONFIG,n=Object(a.useState)({isSignedIn:!1,pendingAuth:!0,user:null}),r=Object(v.a)(n,2),c=r[0],o=r[1];return Object(a.useEffect)((function(){var e=E().onAuthStateChanged((function(e){o({user:e,pendingAuth:!1,isSignedIn:!!e})}));return function(){return e()}}),[]),{auth:e,uiConfig:t,authState:c}}(),t=e.auth,n=e.uiConfig,c=e.authState;return!c.pendingAuth&&r.a.createElement(i.a,null,r.a.createElement(l.d,null,r.a.createElement($e,{isAuth:c.isSignedIn,path:"/project/:projectID/:permissionID"},r.a.createElement(Ye,null)),r.a.createElement(h,{isAuth:c.isSignedIn,path:"/project/:projectID"},r.a.createElement(Ve,{currentUser:function(){return t().currentUser},signOut:function(){return t().signOut()}})),r.a.createElement(l.b,{path:"/login"},r.a.createElement(m,{auth:t,uiConfig:n,authState:c})),r.a.createElement(h,{isAuth:c.isSignedIn,path:"/dashboard"},r.a.createElement(Z,{currentUser:function(){return t().currentUser},signOut:function(){return t().signOut()}})),r.a.createElement(l.b,{path:"/error"},r.a.createElement(Be,null)),r.a.createElement(l.b,{path:"/"},r.a.createElement(u,{pendingAuth:c.pendingAuth,isAuth:c.isSignedIn}))))}var He=r.a.createContext(),Je=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(He.Provider,{value:{appname:"groupthink"}},r.a.createElement(Xe,null)))};n(533),n(534),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Je,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[271,13,14]]]);
//# sourceMappingURL=main.ed2e9769.chunk.js.map