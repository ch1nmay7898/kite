(this.webpackJsonpgroupthink=this.webpackJsonpgroupthink||[]).push([[0],{191:function(e,t,n){},235:function(e,t,n){e.exports=n(410)},240:function(e,t,n){},241:function(e,t,n){},253:function(e,t,n){},258:function(e,t,n){},259:function(e,t,n){},260:function(e,t,n){},261:function(e,t,n){},277:function(e,t){},279:function(e,t){},289:function(e,t){},291:function(e,t){},318:function(e,t){},319:function(e,t){},324:function(e,t){},326:function(e,t){},350:function(e,t){},373:function(e,t,n){},376:function(e,t,n){},377:function(e,t,n){e.exports=n.p+"static/media/cursor.3f646017.svg"},378:function(e,t,n){},385:function(e,t,n){e.exports=n.p+"static/media/loader.05c141ad.svg"},386:function(e,t,n){},410:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(44),o=n.n(c),i=(n(240),n(30)),l=n(20);n(241);function u(e){var t=Object(l.h)();return console.log("splashpage says: I was consulted",t),e.pendingAuth?r.a.createElement("div",{id:"splash"},r.a.createElement("h1",{id:"splashText"},"Welcome to groupthink!"),r.a.createElement("blockquote",null,"Unleash your ideas")):r.a.createElement(l.a,{to:{pathname:e.isAuth?"/dashboard":"/login",state:{from:t}}})}var s=n(199),d=n.n(s);n(253);function m(e){var t,n=Object(l.h)(),a="/dashboard";return void 0!=(null===(t=n.state)||void 0===t?void 0:t.from)&&(a=n.state.from.pathname),e.authState.isSignedIn?r.a.createElement(l.a,{to:{pathname:a,state:{from:n}}}):r.a.createElement("div",{id:"login"},r.a.createElement("h1",{id:"title"},"Groupthink"),r.a.createElement("div",{className:"row align-items-center h-100"},r.a.createElement("div",{className:"col-6"},r.a.createElement("img",{src:"https://picsum.photos/200?random=48"})),r.a.createElement("div",{className:"col-6"},r.a.createElement("div",{className:"landing-subtitle"},r.a.createElement("b",null,"Unleash your ideas like never before")),r.a.createElement("div",{className:"landing-text"},r.a.createElement("em",null,"groupthink")," is a real-time collaborative platform that brings the power of the web into a new type of document. Gone are the days of static, unidimensional word docs and spreadsheets. ",r.a.createElement("em",null,"groupthink")," is a live document that seamlessly integrates video, text, images, links, Tweets, Spotify playlists, Charts, and much more in an easy-to-use interface."),r.a.createElement("p",{id:"sign"},"Please sign-in:"),r.a.createElement(d.a,{uiConfig:e.uiConfig,firebaseAuth:e.auth()}))))}var h=n(96),p=function(e){e.path;var t=e.children,n=e.isAuth,a=Object(h.a)(e,["path","children","isAuth"]);return r.a.createElement(l.b,Object.assign({},a,{render:function(e){var a=e.location;return n?t:r.a.createElement(l.a,{to:{pathname:"/",state:{from:a}}})}}))},f=n(15),g=n.n(f),v=n(28),b=n(16),E=n(5),j=n(11),O=n(8);n(130),n(255),n(256),n(257);O.initializeApp({apiKey:"AIzaSyAjOQlUVvfpaPFKw_dsjVF-ZO9xAFFwLJc",authDomain:"groupthink-fc4b2.firebaseapp.com",databaseURL:"https://groupthink-fc4b2.firebaseio.com",projectId:"groupthink-fc4b2",storageBucket:"groupthink-fc4b2.appspot.com",messagingSenderId:"268412476509",appId:"1:268412476509:web:6a00e11a591b5852d4c1b4",measurementId:"G-94X9F74RYY"});var y=O.auth,w=O.database(),x=O.database.ServerValue.TIMESTAMP,k=O.storage,C=(O.storage().ref(),O.functions()),I={tester:{center:{x:300,y:300},container:{height:"4000px",width:"4000px"},nodes:{root:{children:{dummy:1}}}}},N=r.a.memo((function(e){var t=e.handleClick,n=e.children,a=e.className,c=e.style;return r.a.createElement("button",{onClick:t,className:a,style:c},n)})),P=n(222);n(258);var S=r.a.memo((function(e){return r.a.createElement(P.a,{style:{margin:e.margin||"5px 5px 5px 5px",fontWeight:e.bold?"bold":"normal",width:e.widthOffset?"calc(100% - "+e.widthOffset+"px)":"95%",fontFamily:e.fontFamily||"Varela Round, sans-serif",textDecorationLine:e.strikethrough?"line-through":"none",color:e.color||"black"},className:"inline-input",placeholder:e.placeholder||"Type something here...",value:e.text,onChange:e.onChange,onBlur:e.onSave})}));n(259),n(260);var A=r.a.memo((function(e){return e.addNew?r.a.createElement("div",{className:"project-card text_card"},r.a.createElement(N,{className:"",handleClick:e.onAddNew},"Add New Card")):r.a.createElement("div",{className:"project-card img_card"},void 0!=e.card.shared?r.a.createElement("div",null,"Shared By :- ",e.card.shared.name," ",r.a.createElement("br",null)," Shared Type : ",e.card.shared.type):r.a.createElement("div",null,"Owner"),r.a.createElement("img",{onClick:function(){return e.onOpen(e.id)},src:e.card.thumbnailURL,alt:"project thumbnail"}),void 0===e.card.shared?r.a.createElement(r.a.Fragment,null,r.a.createElement(S,{className:"project-card-item",text:e.card.name,onChange:function(t){return e.onChange(e.id,t.target.value)},onSave:function(){return e.onSave(e.id)}}),r.a.createElement(N,{className:"project-card-item",handleClick:function(){return e.onDelete(e.id)}},"Delete")):r.a.createElement(r.a.Fragment,null,"Project Name: ",e.card.name))}));n(261);function D(e){var t=Object(l.g)(),n=Object(a.useState)(null),c=Object(j.a)(n,2),o=c[0],i=c[1],u="users/"+e.currentUser().uid+"/projects/";Object(a.useEffect)((function(){var t=w.ref("users/"+e.currentUser().uid+"/projects/");return t.on("value",(function(e){console.log("triggered listener and updated project list state, snapshot value was",e.val()),i(e.val())})),function(){return t.off("value")}}),[e]);var s=function(){var e=Object(v.a)(g.a.mark((function e(t){var n,a,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("about to delete project",t),n=w.ref("documents/"+t+"/room/").once("value").then((function(e){return e.val()})).catch((function(e){return console.log("onDelete Error",e)})),console.log("UID DATA KEYS",n),a={},e.next=6,n.then((function(e){e&&Object.keys(e).map((function(e){a["users/"+e+"/projects/"+t+"/"]=null}))})).catch((function(e){return console.log("Error While UID Fetch",e)}));case 6:a["documents/"+t+"/"]=null,a["creator/"+t+"/"]=null,C.httpsCallable("createNewProject")(a).then((function(e){return console.log(e,a)})).catch((function(e){return console.log(e)})),r=function(e,t){k().ref(e).child(t).delete().then(console.log("File Deleted")).catch((function(e){return console.log("File Delete Error",e)}))},function e(t){console.log("Path TO Delete",t);var n=k().ref(t);n.listAll().then((function(t){t.prefixes.length>0||t.items.length>0?(t.items.length>0&&t.items.forEach((function(e){r(n.fullPath,e.name)})),t.prefixes.forEach((function(t){e(t.fullPath)}))):console.log("No Files Exist")})).catch((function(e){console.log("List All Error ",e)}))}("root/"+t+"/");case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(v.a)(g.a.mark((function e(t){var n,a,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=w.ref("documents/"+t+"/room/").once("value").then((function(e){return e.val()})).catch((function(e){return console.log("on Rename Error",e)})),console.log("UID DATA KEYS",n),a=o[t].name,console.log("about to rename project",t,", changing title to",a),r={},e.next=7,n.then((function(e){e&&Object.keys(e).map((function(e){r["users/"+e+"/projects/"+t+"/name"]=a}))})).catch((function(e){return console.log("Error While UID Fetch",e)}));case 7:r["documents/"+t+"/metadata/name"]=a,C.httpsCallable("createNewProject")(r).then((function(e){return console.log("successfully renamed project",t,"to",a,"\n and Updates are \n ",e,r)})).catch((function(e){return console.log(e)}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(e){console.log("attempting to open project",e),t.push("/project/"+e)},h=function(e,t){console.log("un-finalized text change in",e,". new text:",t),console.log(Object(E.a)(Object(E.a)({},o),{},Object(b.a)({},e,Object(E.a)(Object(E.a)({},o[e]),{},{name:t})))),i(Object(E.a)(Object(E.a)({},o),{},Object(b.a)({},e,Object(E.a)(Object(E.a)({},o[e]),{},{name:t}))))};return r.a.createElement("div",{id:"project-card-container"},r.a.createElement(A,{addNew:!0,onAddNew:function(){console.log("clicked add new");var t=w.ref().child(u).push().key,n={},a="https://picsum.photos/200?random="+Math.floor(100*Math.random());n["creator/"+t]=e.currentUser().uid,n[u+t]={access:"rw",name:"New Project",thumbnailURL:a},n["documents/"+t]=Object(E.a)({metadata:{name:"New Project",thumbnailURL:a,datecreated:x},users:Object(b.a)({},e.currentUser().uid,"rw")},I.tester),C.httpsCallable("createNewProject")(n).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}))}}),o?Object.entries(o).map((function(e){var t=Object(j.a)(e,2),n=t[0],a=t[1];return r.a.createElement(A,{key:n,id:n,card:a,onChange:h,onSave:d,onDelete:s,onOpen:m})})):null)}var U=n(441),z=n(201),T=n(428),L=n(429),F=n(430),R=n(431),_=n(432),M=n(433),V=n(434),W=n(435),B=n(436),q=n(437),G=n(438),Y=n(439),$=function(e){var t=e.url,n=e.title,a=e.size,c=Object(z.Passers)({url:t,className:"network__share-button"})({className:"network cursor-pointer hover transition--default",title:"Share ".concat(t)})("li");return r.a.createElement("div",{className:"social_link"},r.a.createElement(c,null,r.a.createElement(T.a,{quote:n},r.a.createElement(L.a,{size:a})),r.a.createElement(F.a,{title:n},r.a.createElement(R.a,{size:a})),r.a.createElement(_.a,{title:n,separator:":: "},r.a.createElement(M.a,{size:a})),r.a.createElement(V.a,{title:n,windowWidth:750,windowHeight:600},r.a.createElement(W.a,{size:a})),r.a.createElement(B.a,{url:String(window.location),windowWidth:1e3,windowHeight:730},r.a.createElement(q.a,{size:a})),r.a.createElement(G.a,{subject:"Groupthink Web Link",body:"Here is the link ".concat(t)},r.a.createElement(Y.a,{size:a}))))},H=n(77),X=(n(191),function(){var e=Object(v.a)(g.a.mark((function e(t,n,a,r,c,o){var i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(i={})["documents/".concat(t,"/room/")+n]={name:a,photoURL:o,email:c,permission:r},e.next=4,w.ref().update(i).then(console.log("Created ROOM")).catch((function(e){return e}));case 4:case"end":return e.stop()}}),e)})));return function(t,n,a,r,c,o){return e.apply(this,arguments)}}()),J=function(e){var t=Object(a.useState)(!1),n=Object(j.a)(t,2),c=n[0],o=n[1],i=Object(a.useState)(!1),l=Object(j.a)(i,2),u=l[0],s=l[1],d=Object(a.useState)(),m=Object(j.a)(d,2),h=m[0],p=m[1],f=Object(a.useState)(),g=Object(j.a)(f,2),v=g[0],b=g[1],E=Object(a.useState)(),O=Object(j.a)(E,2),y=O[0],x=O[1];function k(e,t,n){return e.replace(new RegExp(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),n)}var C=function(e){b(e.target.value)},I=function(e){p(e.target.value)},P=function(){o(!1),s(!1),x(null),p(null),b(null)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(N,{className:e.buttonClassName,handleClick:function(){return o(!0)}},"Share"),r.a.createElement(U.a,{show:c,onHide:P},r.a.createElement(U.a.Header,{closeButton:!0},r.a.createElement(U.a.Title,null,"Share Your Project")),r.a.createElement(U.a.Body,null,"Type Of Link To be Shared",r.a.createElement("br",null),r.a.createElement("input",{type:"radio",name:"linkType",value:"public",onChange:function(e){return I(e)},required:!0}),r.a.createElement("label",{htmlFor:"male"},"Public"),r.a.createElement("input",{type:"radio",name:"linkType",value:"private",onChange:function(e){return I(e)},required:!0}),r.a.createElement("label",{htmlFor:"male"},"Private "),r.a.createElement("br",null),r.a.createElement("input",{type:"radio",name:"options",value:"r",onChange:function(e){return C(e)},required:!0}),r.a.createElement("label",{htmlFor:"male"},"Read Only"),r.a.createElement("input",{type:"radio",name:"options",value:"rw",onChange:function(e){return C(e)},required:!0}),r.a.createElement("label",{htmlFor:"male"},"Read and Write "),r.a.createElement("br",null),r.a.createElement(N,{className:"custom_btn",handleClick:function(){if(void 0!=h&&void 0!=v){s(!0),"private"===h?X(e.projectID,e.currentUser.uid,e.currentUser.displayName,v,e.currentUser.email,e.currentUser.photoURL).then("Room Made").catch((function(e){return e})):function(e,t,n,a,r,c){var o="documents/".concat(e,"/"),i={};i[o+"/users/public"]=t,i[o+"/room/"+n]={name:a,photoURL:c,email:r,permission:t},w.ref().update(i).then(console.log("Created Public With Permission",t))}(e.projectID,v,e.currentUser.uid,e.currentUser.displayName,e.currentUser.email,e.currentUser.photoURL);var t=k(H.encrypt(v,"grpthink12!").toString(),"/","$"),n=k(H.encrypt(e.currentUser.displayName,"grpthink12!").toString(),"/","$"),a=k(H.encrypt(h,"grpthink12!").toString(),"/","$");console.log(t,v,"\n Name ",n,"\n Type \n",a),x(String(window.location)+"/"+t+"/"+a+"/"+n)}else s(!1)}},"Generate Link"),u?r.a.createElement("div",null,r.a.createElement("br",null),"Copy Your Link :",r.a.createElement("br",null),r.a.createElement("b",{style:{display:"inline-flex"}},y),r.a.createElement("br",null),r.a.createElement($,{url:y,title:"Groupthink Website",size:"2.5rem"})):r.a.createElement("div",null)),r.a.createElement(U.a.Footer,null,r.a.createElement(N,{className:"custom_btn",handleClick:P},"Close"),r.a.createElement(N,{className:"custom_btn",handleClick:P},"Save Changes"))))},K=n(440),Q=n(220),Z=r.a.memo((function(e){var t=Object(a.useState)(!1),n=Object(j.a)(t,2),c=n[0],o=n[1],i=Object(a.useState)(null),l=Object(j.a)(i,2),u=l[0],s=l[1],d=function(){return o(!1)},m=function(){var e=Object(v.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o(!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){return w.ref("documents/"+h+"/room/").on("value",(function(e){return s(e.val())})),function(){return w.ref("documents/"+h+"/room/").off()}}),[]),console.log("users state",u);var h=e.projectID,p=function(e,t){return function(){var n={};n["users/".concat(e,"/projects/").concat(h,"/access")]=t,n["documents/".concat(h,"/users/").concat(e,"/")]=t,n["documents/".concat(h,"/room/").concat(e,"/permission")]=t,C.httpsCallable("createNewProject")(n).then((function(e){return console.log("Updates Done",e,n)})).catch((function(e){return console.log(e)}))}};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(N,{className:e.buttonClassName,handleClick:m},"SharedList"),r.a.createElement(U.a,{show:c,onHide:d},r.a.createElement(U.a.Header,{closeButton:!0},r.a.createElement(U.a.Title,null,"Shared List Of Users")),r.a.createElement(U.a.Body,null,u&&!e.isOwner?Object.entries(u).map((function(t){var n,a=Object(j.a)(t,2),c=a[0],o=a[1];return r.a.createElement("div",{key:c},r.a.createElement("img",{src:null===o||void 0===o?void 0:o.photoURL,className:"menu-bar-user-profile-picture"}),r.a.createElement("b",null,null===o||void 0===o?void 0:o.email),"-",e.isOwner?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,null===o||void 0===o?void 0:o.name),"\xa0",r.a.createElement("span",null,null===o||void 0===o?void 0:o.permission),r.a.createElement(K.a,{title:null===o||void 0===o?void 0:o.permission,size:"sm"},r.a.createElement(Q.a.Item,{onClick:p(c,"r")},"Read Only"),r.a.createElement(Q.a.Item,{onClick:p(c,"rw")},"Read And Write"),r.a.createElement(Q.a.Divider,null),r.a.createElement(Q.a.Item,{onClick:(n=c,Object(v.a)(g.a.mark((function e(){var t,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.ref("documents/".concat(h,"/users/")).once("value").then((function(e){return e.hasChild(n)})).catch((function(e){return e}));case 2:t=e.sent,(a={})["users/".concat(n,"/projects/").concat(h,"/shared")]=null,t&&(a["documents/".concat(h,"/users/").concat(n,"/")]="rw"),C.httpsCallable("createNewProject")(a).then((function(e){return console.log("Updates Done",e,a)})).catch((function(e){return console.log(e)}));case 8:case"end":return e.stop()}}),e)}))))},"Make Owner"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,o.name),r.a.createElement("span",null,"(Owner)")))})):r.a.createElement("p",null,"No Lists")),r.a.createElement(U.a.Footer,null,r.a.createElement(N,{className:"custom_btn",handleClick:d},"Close"),r.a.createElement(N,{className:"custom_btn",handleClick:d},"Save Changes")))))}));function ee(e){var t=e.currentUser();return r.a.createElement("div",{className:"menu-bar topheader"},r.a.createElement("div",{className:"menu-bar-panel menu-bar-panel-left"},r.a.createElement("img",{alt:"",className:"menu-bar-user-profile-picture",src:t.photoURL}),r.a.createElement("div",{className:"menu-bar-user-name"},t.displayName)),r.a.createElement("div",{className:"menu-bar-panel menu-bar-panel-center"},r.a.createElement("div",{className:"menu-bar-site-title"},r.a.createElement(i.b,{to:"/dashboard"},"groupthink"))),r.a.createElement("div",{className:"menu-bar-panel menu-bar-panel-right"},r.a.createElement(N,{className:"menu-action-button",handleClick:e.onLogOut},"Log Out"),e.document&&!e.isOwner?r.a.createElement(r.a.Fragment,null,r.a.createElement(J,{projectID:e.projectID,buttonClassName:"menu-action-button",currentUser:t}),r.a.createElement(Z,{projectID:e.projectID,buttonClassName:"menu-action-button",currentUser:t,isOwner:e.isOwner})):null))}function te(e){var t=Object(l.h)();return r.a.createElement("div",null,r.a.createElement(ee,{onLogOut:function(){return e.signOut(),r.a.createElement(l.a,{to:{pathname:"/dashboard",state:{from:t}}})},currentUser:e.currentUser}),r.a.createElement(D,{currentUser:e.currentUser}))}var ne=n(49),ae=n(197),re=n(69),ce=n.n(re),oe=r.a.memo((function(e){var t;return r.a.createElement(r.a.Fragment,null,(null===(t=e.content)||void 0===t?void 0:t.url)?r.a.createElement("div",null,r.a.createElement(ce.a,{url:e.content.url,width:"",height:"250px",controls:!0})):null)})),ie=n(204),le=r.a.memo((function(e){return r.a.createElement("div",null,void 0===e.content.text?Object.entries(e.content).map((function(e,t){var n,a;return r.a.createElement("div",{key:e[0]},"File Name :",r.a.createElement("a",{href:null===(n=e[1])||void 0===n?void 0:n.url,target:"_blank"},e[0].split(">")[0]),r.a.createElement(ie.a,{src:null===(a=e[1])||void 0===a?void 0:a.url,style:{overflow:"hidden",display:"inline-table"},scrolling:"no"}))})):null)})),ue=r.a.memo((function(e){return r.a.createElement("div",null,void 0===e.content.text?Object.entries(e.content).map((function(e,t){var n;return r.a.createElement("div",{key:e[0]},"File Name : ",e[0].split(">")[0],r.a.createElement("img",{src:"".concat(null===(n=e[1])||void 0===n?void 0:n.url)}))})):null)})),se=n(126),de=r.a.memo((function(e){return r.a.createElement("div",null,void 0===e.content.text?Object.entries(e.content).map((function(e,t){var n;return r.a.createElement("div",{key:e[0]},"File Name :",r.a.createElement("a",{href:null===(n=e[1])||void 0===n?void 0:n.url,target:"_blank"},e[0].split(">")[0]))})):null)})),me=r.a.memo((function(e){return r.a.createElement("div",null,void 0===e.content.text?Object.entries(e.content).map((function(t,n){var a;return r.a.createElement("div",{key:t[0]},"File Name : ",t[0].split(">")[0],r.a.createElement(ce.a,{controls:!0,url:null===(a=t[1])||void 0===a?void 0:a.url,width:e.size.width,height:e.size.height}))})):null)})),he=n(221),pe=(n(372),r.a.memo((function(e){return r.a.createElement("div",null,void 0===e.content.text?Object.entries(e.content).map((function(e,t){var n;return r.a.createElement("div",{key:e[0]},"File Name : ",e[0].split(">")[0],r.a.createElement(he.a,{src:null===(n=e[1])||void 0===n?void 0:n.url,showDownloadProgress:"false",preload:"metadata"}))})):null)}))),fe=r.a.memo((function(e){var t;return r.a.createElement(r.a.Fragment,null,(null===(t=e.content)||void 0===t?void 0:t.url)?r.a.createElement("div",null,r.a.createElement(se.ReactTinyLink,{cardSize:"small",showGraphic:!0,maxLine:2,minLine:1,url:e.content.url})):null)}));var ge=r.a.memo((function(e){return r.a.createElement("div",{className:"text-node",style:{overflowX:"hidden",overflowY:"auto",width:"100%",height:"100%"}},r.a.createElement(S,{onChange:function(t){return n=t,e.typeAPI.changeContent(e.id,{text:n.target.value});var n},onSave:function(){return e.typeAPI.saveContent(e.id,{text:e.content.text})},text:e.content.text,lwidth:"100px"}))})),ve=(n(373),n(216));n(375);var be=r.a.memo((function(e){var t=Object(a.useState)([]),n=Object(j.a)(t,2),c=n[0],o=n[1],i={text:{height:200,width:280},todo:{height:300,width:230},file:{height:100,width:280},image:{height:300,width:350},VideoFile:{height:200,width:350},VideoLink:{height:250,width:350},pdf:{height:208,width:300},audio:{height:142,width:300},link:{height:157,width:340}},l={process:function(t,n,a,r,c,o,l){var u,s={contentType:null===n||void 0===n?void 0:n.type},d=e.id+"/"+n.name.split(".")[0]+">"+n.lastModified+"/",m=function(e){var t=["image","video","audio","pdf"],n="file",a=e.split("/");console.log(a,a.length);for(var r=a.length-1;r>=0;r--)-1!==t.indexOf(a[r])&&(n=a[r]);return console.log(e,n),"video"===n?"VideoFile":n}(null===n||void 0===n?void 0:n.type);return e.typeAPI.requestUpload(d,n,Object(E.a)(Object(E.a)({},a),s),(function(t,n){u=n,"number"===typeof t?o(!0,t,100):(r(e.id),e.typeAPI.requestDownload(d,(function(t,n){var a;e.typeAPI.changeType(e.id,m,i[m]),e.typeAPI.saveContent(e.id,(a={},Object(b.a)(a,n.name,{url:t,metadata:n}),Object(b.a)(a,"/text",null),a))})))})),{abort:function(){console.log("attempted to cancel upload, success:",u.cancel()),l()}}}};return r.a.createElement("div",null,r.a.createElement(N,{handleClick:function(){return e.typeAPI.changeType(e.id,"text",i.text)}},"Text"),r.a.createElement(N,{handleClick:function(){return e.typeAPI.changeType(e.id,"todo",i.todo)}},"Todo"),r.a.createElement(S,{onChange:function(t){return function(t){e.typeAPI.changeContent(e.id,{text:t.target.value})}(t)},onSave:function(){var t=function(e){var t;if(t=e,new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(t)){var n="link";return ce.a.canPlay(e)&&(n="VideoLink"),console.log("Detector Extention Type After Loop",n),n}return"NoLink"}(e.content.text);"NoLink"===t?e.typeAPI.saveContent(e.id,{text:e.content.text}):(e.typeAPI.changeType(e.id,t,i[t]),e.typeAPI.saveContent(e.id,{url:e.content.text}))}}),r.a.createElement(ve.FilePond,{files:c,allowMultiple:!1,maxFiles:1,onupdatefiles:function(e){return o(e.map((function(e){return e.file})))},server:l}))}));var Ee=r.a.memo((function(e){var t=["great","nice","awesome","crazy","special"];return r.a.createElement("div",{className:"todo-item",id:e.itemID},r.a.createElement("label",{className:"checkbox"},r.a.createElement("input",{type:"checkbox",checked:e.checked,onChange:function(t){return e.onCheckToggle(t.target.checked)}}),r.a.createElement("span",null)),r.a.createElement(S,{placeholder:"do something "+t[e.order%t.length],text:e.text,widthOffset:60,onChange:function(t){return e.onTextChange(t.target.value)},onSave:function(t){return e.onTextSave(t.target.value)},margin:"0px 0px 0px 10px",strikethrough:e.checked,color:e.checked?"grey":"black"}),r.a.createElement(N,{handleClick:e.onDelete},"x"))})),je=r.a.memo((function(e){var t=function(t,n,a){e.typeAPI.saveContent(e.id,Object(E.a)(Object(E.a)({},e.content),{},{items:Object(E.a)(Object(E.a)({},e.content.items),{},Object(b.a)({},t,Object(E.a)(Object(E.a)({},e.content.items[t]),{},Object(b.a)({},n,a))))}))};return r.a.createElement("div",{className:"todo-card",style:{overflowX:"hidden",overflowY:"auto",width:"100%",height:"100%"}},r.a.createElement("div",{className:"heading"},r.a.createElement(S,{placeholder:"TODO title",text:e.content.title,onChange:function(t){return e.typeAPI.changeContent(e.id,Object(E.a)(Object(E.a)({},e.content),{},{title:t.target.value}))},onSave:function(t){return e.typeAPI.saveContent(e.id,Object(E.a)(Object(E.a)({},e.content),{},{title:t.target.value}))},margin:"7px 0px 0px 0px",bold:!0,sticky:!0}),r.a.createElement("hr",{style:{marginTop:"0px",marginBottom:"7px"}})),r.a.createElement(N,{handleClick:function(){e.typeAPI.saveContent(e.id,Object(E.a)(Object(E.a)({},e.content),{},{lastOrder:e.content.lastOrder+1,items:Object(E.a)(Object(E.a)({},e.content.items),{},Object(b.a)({},"todoitem"+(e.content.lastOrder+1),{checked:!1,text:"",order:e.content.lastOrder+1}))}))}},"+ add new"),r.a.createElement("div",{className:"todo-item-list",style:{overflowX:"hidden",overflowY:"auto"}},e.content.items?Object.entries(e.content.items).filter((function(e){var t=Object(j.a)(e,2),n=t[0];t[1];return"root"!==n})).sort((function(e,t){var n=Object(j.a)(e,2),a=(n[0],n[1]),r=Object(j.a)(t,2);r[0];return r[1].order-a.order})).map((function(n){var a=Object(j.a)(n,2),c=a[0],o=a[1];return r.a.createElement(Ee,{key:c,itemID:c,text:o.text,checked:o.checked,order:o.order,onCheckToggle:function(e){return t(c,"checked",e)},onTextChange:function(t){return n=c,a="text",r=t,void e.typeAPI.changeContent(e.id,Object(E.a)(Object(E.a)({},e.content),{},{items:Object(E.a)(Object(E.a)({},e.content.items),{},Object(b.a)({},n,Object(E.a)(Object(E.a)({},e.content.items[n]),{},Object(b.a)({},a,r))))}));var n,a,r},onTextSave:function(e){return t(c,"text",e)},onDelete:function(){return t=c,void e.typeAPI.saveContent(e.id,Object(E.a)(Object(E.a)({},e.content),{},{items:Object(E.a)(Object(E.a)({},e.content.items),{},Object(b.a)({},t,null))}));var t}})})):null))}));n(376);ne.a.registerPlugin(ae.a);var Oe=r.a.memo((function(e){var t,n=function(e){switch(e){case"blank":return be;case"text":return ge;case"todo":return je;case"VideoLink":return oe;case"video":case"VideoFile":return me;case"image":return ue;case"audio":return pe;case"link":return fe;case"pdf":return le;case"file":return de;default:return be}}(null===(t=e.card)||void 0===t?void 0:t.type,e.card.content);return Object(a.useEffect)((function(){ne.a.to("#".concat(e.id),Object(E.a)(Object(E.a)({},e.card.size),{},{duration:.3}))}),[e.card.size.height,e.card.size.width]),Object(a.useEffect)((function(){ne.a.set("#".concat(e.id),Object(E.a)({opacity:1},e.card.position))}),[e.id,e.card.position]),Object(a.useEffect)((function(){var t=ae.a.create("#".concat(e.id),{autoScroll:1,trigger:"#handle".concat(e.id),onDrag:function(){console.log("now that was a drag"),this.update()},onDragEnd:function(){e.genericAPI.savePosition(e.id,{x:this.x,y:this.y})}});return function(){return t[0].kill()}}),[]),r.a.createElement("div",{id:e.id,className:"generic-card",style:{position:"absolute",opacity:0}},r.a.createElement("div",{id:"handle".concat(e.id),className:"card-handle card-title-bar"},r.a.createElement("button",{className:"card-control-button add",onClick:function(){return e.genericAPI.addChild({x:e.card.position.x+100,y:e.card.position.y+100},{width:e.card.size.width,height:e.card.size.height},e.id,"blank")}},"+"),r.a.createElement("button",{className:"card-control-button lock"},"L"),r.a.createElement("button",{className:"card-control-button delete",onClick:function(){return e.genericAPI.removeCard(e.id,"recursive",e.card.parent)}},"X")),r.a.createElement("div",{style:{width:"100%",height:e.card.size.height-30}},r.a.createElement(n,{typeAPI:e.typeAPI,content:e.card.content,size:e.card.size,id:e.id})))})),ye=n(217);function we(e){return console.log("cursors",e),Object(a.useEffect)((function(){ye.a.to("#cursor".concat(e.id),{left:e.x,top:e.y-60,duration:.2}).play()}),[e.x,e.y,e.id]),r.a.createElement("div",{id:"cursor".concat(e.id),style:{position:"absolute",height:45,display:"flex",flexFlow:"column nowrap",justifyContent:"space-between",alignItems:"flex-start",overflow:"visible"}},r.a.createElement("img",{alt:"cursor",src:n(377),style:{userSelect:"none",maxWidth:"25px",maxHeight:"25px"}}),r.a.createElement("div",{style:{marginLeft:10,paddingLeft:5,paddingRight:5,paddingBottom:2,paddingTop:2,backgroundColor:"darkorange",color:"white",fontSize:13,fontFamily:"sans-serif"}},e.name))}ne.a.registerPlugin(ae.a);var xe=r.a.memo((function(e){var t,n=Object(a.useState)(!1),c=Object(j.a)(n,2),o=c[0],i=c[1];function l(e,t,n,a){var r=.1*Math.abs(n-e),c=e-r,o=n+r;return"M".concat(e," ").concat(t," C ").concat(c," ").concat(t," ").concat(o," ").concat(a," ").concat(n," ").concat(a)}return Object(a.useEffect)((function(){var t=ae.a.create("#nub".concat(e.id),{type:"top,left",activeCursor:"grab",onDragStart:function(){ne.a.set("#nub".concat(e.id),{top:e.tail.y,left:e.tail.x}),t[0].update()},onDrag:function(){i({x:this.x,y:this.y})},onDragEnd:function(){e.hits.forEach((function(n){t[0].hitTest("#".concat(n))&&(console.log("i hit",n),e.arrowAPI.reparentCard(e.id,n))})),t[0].update(),i(!1)}});return function(){console.log("about to kill a draggable"),t[0].kill()}}),[e.hits]),t=o?l(o.x,o.y,e.tail.x,e.tail.y):l(e.head.x,e.head.y,e.tail.x,e.tail.y-5),r.a.createElement("div",{style:{position:"absolute",height:0,width:0,top:0,left:0,overflow:"visible",zIndex:-1}},r.a.createElement("svg",{style:{position:"absolute",width:0,height:0,overflow:"visible"}},r.a.createElement("path",{strokeWidth:"3",fill:"none",stroke:"grey",d:t})),r.a.createElement("svg",{style:{position:"absolute",overflow:"visible",width:0,height:0}},r.a.createElement("circle",{style:{position:"absolute"},id:"nub".concat(e.id),cx:o?o.x:e.tail.x,cy:o?o.y:e.tail.y,r:"5",stroke:"black",fill:"grey"})))}));n(378);function ke(e){var t=Object(a.useState)(1),n=Object(j.a)(t,2),c=n[0],o=n[1],i=Date.now();return console.log(e.cursors),r.a.createElement("div",{className:"card-container",style:{overflow:"scroll",position:"absolute",zIndex:1,width:"100vw"}},Object.keys(e.cards).length>1?r.a.createElement("input",{type:"range",min:"0.5",max:"2.5",defaultValue:"1",step:"0.1",onChange:function(e){return o(e.target.value)}}):null,r.a.createElement("div",{className:"container-filler",style:Object(E.a)(Object(E.a)({},e.container),{},{position:"absolute",zIndex:9999999,top:0,left:0,transformOrigin:"0% 0%",transform:"scale(".concat(c,")")}),onDoubleClick:function(t){if("card-container"===t.target.offsetParent.className){var n=Math.floor(t.clientX+t.target.offsetParent.scrollLeft),a=Math.floor(t.clientY-60+t.target.offsetParent.scrollTop);console.log("double click at",n,",",a),e.genericAPI.addChild({x:n,y:a},{width:310,height:200})}else console.log("registered a double click on a card and did absolutely nothing about it")},onMouseMove:function(t){console.log("triggered mouse move"),t.persist(),e.containerAPI.saveCursorPosition(t)}},e.cards?Object.entries(e.cards).filter((function(e){var t=Object(j.a)(e,2),n=t[0];t[1];return n&&"root"!==n})).map((function(t){var n=Object(j.a)(t,2),a=n[0],c=n[1];return r.a.createElement("div",{key:"wrapperdiv".concat(a)},r.a.createElement(Oe,{key:a,id:a,card:c,genericAPI:e.genericAPI,typeAPI:e.typeAPI}),c.parent&&"root"!==c.parent&&r.a.createElement(xe,{key:"arrow".concat(a),id:"".concat(a),arrowAPI:e.arrowAPI,hits:Object.keys(e.cards),head:{x:e.cards[c.parent].position.x+e.cards[c.parent].size.width/2,y:e.cards[c.parent].position.y+e.cards[c.parent].size.height/2},tail:{x:c.position.x+c.size.width/2,y:c.position.y-5}}))})):r.a.createElement("p",null,"Double Click to Add a Card"),void 0!=e.cursors?Object.entries(e.cursors).filter((function(t){var n=Object(j.a)(t,2),a=n[0],r=n[1];return a!==e.currentUser().uid&&i-Number(r.time)<6e4})).map((function(t){var n=Object(j.a)(t,2),a=n[0],c=n[1];return r.a.createElement(we,{key:a,id:a,name:e.currentUser().displayName,x:c.x,y:c.y,projectID:e.projectID})})):null))}var Ce=n(218),Ie=n.n(Ce),Ne=function(e,t){var n={type:e,size:t,content:{text:"This is a ".concat(e," Card")}},a={type:e,size:t,content:{text:"This is a ".concat(e," Card")}},r={type:e,size:t,content:{text:"This is a ".concat(e," Card")}},c={type:e,size:t,content:{text:"This is a ".concat(e," Card")}},o={type:e,size:t,content:{text:"This is a ".concat(e," Card")}},i={type:e,size:t,content:{text:"This is a ".concat(e," Card")}},l={type:e,size:t,content:{text:"This is a ".concat(e," Card")}},u={type:e,size:t,content:{text:""}},s={type:e,size:t,content:{text:"This is a ".concat(e," Card")}},d={type:e,size:t,content:{title:"",lastOrder:0,items:{root:1}}};switch(e){case"text":return u;case"todo":return d;case"VideoLink":return a;case"VideoFile":return l;case"image":return i;case"audio":return n;case"link":return o;case"pdf":return r;case"file":return c;default:return s}};function Pe(e){var t=Object(a.useState)(!1),n=Object(j.a)(t,2),c=n[0],o=n[1],i=Object(a.useState)({width:600,height:800}),l=Object(j.a)(i,2),u=l[0],s=l[1],d=Object(a.useRef)({});d.current=u;var m=Object(a.useState)(),h=Object(j.a)(m,2),p=h[0],f=h[1],g=Object(a.useState)({}),v=Object(j.a)(g,2),O=v[0],y=v[1],C=w.ref("documents/"+e.projectID+"/nodes");Object(a.useEffect)((function(){var t=w.ref("documents/"+e.projectID);return t.child("nodes").on("value",(function(e){console.log("triggered node listener, received payload",e.val()),y(e.val())})),t.child("center").on("value",(function(e){console.log("triggered center location listener, received payload",e.val())})),t.child("container").on("value",(function(e){console.log("triggered container size listener, received payload",e.val()),s(e.val())})),t.child("cursors").on("value",(function(e){console.log("cursors Details Triggered recieved payload",e.val()),e.val()&&f(e.val())})),o(!0),function(){t.child("nodes").off(),t.child("center").off(),t.child("container").off()}}),[]);var I=function(e,t){y(Object(E.a)(Object(E.a)({},O),{},Object(b.a)({},e,Object(E.a)(Object(E.a)({},O[e]),{},{size:t})))),C.child(e).child("size").set(t).then(console.log("set new size for",e,"to",t))},N=function(e,t){console.log("triggered local content change on",e),y(Object(E.a)(Object(E.a)({},O),{},Object(b.a)({},e,Object(E.a)(Object(E.a)({},O[e]),{},{content:t}))))},P=function(e,t){if(console.log("reparent requested for",e,"newparent",t),function t(n){return"root"===n||n!==e&&t(O[n].parent)}(t)){var n={},a=O[e].parent;return n[e+"/parent"]=t,n[a+"/children/"+e]=null,n[t+"/children/"+e]=1,void C.update(n).then(console.log("successfully changed the parent of",e,"from",a,"to",t)).catch((function(e){return console.log("error reparenting because",e)}))}console.log("didn't reparent because it was not a valid request")},S=Object(a.useCallback)(Ie()((function(t){p&&w.ref("documents/"+e.projectID+"/cursorss/").child(e.currentUser().uid).set({x:t.clientX,y:t.clientY,time:x}).then(console.log("Data Cursors Updated to DB")).catch((function(e){return console.log("send to DB Cursors Error",e)}))}),100),[p]),A={savePosition:function(t,n){var a={},r={width:d.current.width,height:d.current.height},c=w.ref("documents/"+e.projectID);n.x>d.current.width&&(console.log("x",n.x,"was greater than width",d.current),r.width=n.x+300),n.y>d.current.height&&(console.log("y",n.y,"was greater than height",u.current),r.height=n.y+300),a["nodes/"+t+"/position/"]=n,r&&(a["container/"]=r),console.log("newcontainer: ",r,"old container: ",d.current),c.update(a).then(console.log("set new position for",t,"to",n,"\nresized container to",r))},changePosition:function(e,t){y(Object(E.a)(Object(E.a)({},O),{},Object(b.a)({},e,Object(E.a)(Object(E.a)({},O[e]),{},{position:t}))))},reparentCard:P,removeCard:function(t,n,a){var r={};r[t]=null,r[O[t].parent+"/children/"+t]=null;switch(n){case"recursive":O[t].children&&function(e){for(;e.length>0;){var t=e.pop();r[t]=null,O[t].children&&e.concat(Object.keys(O[t].children))}}(Object.keys(O[t].children));break;case"reparent":Object.keys(O[t].children).forEach((function(e){return r[e+"/parent"]=a}))}var c=["link","blank","VideoLink","text"];if(console.log("Type Of Card ",O[t].type,"\n Exists Storage Types ",!c.includes(O[t].type,0)),c.includes(O[t].type,0))console.log("Its a NOn Storage Card");else{var o="root/"+e.projectID+"/"+t+"/";!function(e){var t=k().ref(e);t.listAll().then((function(e){e.items.length>0?e.items.forEach((function(e){var n,a;n=t.fullPath,a=e.name,k().ref(n).child(a).delete().then(console.log("File Deleted")).catch((function(e){return console.log("Error in Delete File",e)}))})):console.log("No Files Exist")})).catch((function(e){console.log("Error in List All",e)}))}(o)}C.update(r).then(console.log("deleted",t,"successfully"))},addChild:function(e,t,n,a){var r,c=n||"root",o=a||"blank",i={type:o,size:t,position:e,content:{text:"This is a ".concat(o," Card")},parent:c},l=C.push().key,u={};u[c+"/children/"+l]=1,u[l]=i,C.update(u).then(console.log("Added a new child",l,"under",c)),y(Object(E.a)(Object(E.a)({},O),{},(r={},Object(b.a)(r,l,i),Object(b.a)(r,c,Object(E.a)(Object(E.a)({},O[c]),{},{children:Object(E.a)(Object(E.a)({},O[c].children),{},Object(b.a)({},l,1))})),r)))},resize:I},D={saveContent:function(e,t){N(e,t),C.child(e).child("content").update(t).then(console.log("saved new content for",e)).catch((function(e){return console.log("Save COntent Error \n",t,"\n saveContent",e)}))},changeContent:N,requestUpload:function(t,n,a,r){var c=Object(E.a)(Object(E.a)({},a),{},{customMetadata:Object(b.a)({},e.currentUser().uid,e.permission)});console.log("metadata sent was",c);var o="root/"+e.projectID+"/"+t,i=k().ref(o).put(n,c),l=i.on(k.TaskEvent.STATE_CHANGED,(function(e){return r(e.bytesTransferred/e.totalBytes*100,i)}),null,(function(){console.log(),r("complete"),l()}))},requestDownload:function(t,n){var a="root/"+e.projectID+"/"+t,r=k().ref(a);r.getDownloadURL().then((function(e){r.getMetadata().then((function(t){return n(e,JSON.parse(JSON.stringify(t)))})).catch((function(e){return console.log("failed to fetch metadata for",a,"because",e)}))})).catch((function(e){return console.log("failed to fetch download URL for",a,"because",e)}))},changeType:function(e,t,n){var a=Ne(t,n);y(Object(E.a)(Object(E.a)({},O),{},Object(b.a)({},e,Object(E.a)(Object(E.a)({},O[e]),{},{type:a.type,size:a.size,content:a.content}))));var r={};r[e+"/type"]=a.type,r[e+"/size"]=a.size,r[e+"/content"]=a.content,C.update(r).then(console.log("Set new type for",e,"to \n",a)).catch((function(e){return e}))},resize:I},U={reparentCard:P},z={saveCursorPosition:S};return c?r.a.createElement(ke,{container:u,cards:O,genericAPI:A,typeAPI:D,arrowAPI:U,permission:e.permission,currentUser:e.currentUser,containerAPI:z,cursors:p,projectID:e.projectID}):r.a.createElement("div",null,"Loading...")}var Se=n(80),Ae=function(){var e=Object(v.a)(g.a.mark((function e(t,n,a,r){var c,o,i,l,u,s,d,m;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=null===(c=Object(Se.auth)().currentUser)||void 0===c?void 0:c.uid,i="documents/".concat(t,"/users/"),void 0==n){e.next=14;break}return console.log("Permission in Search Child",n),e.next=6,De(i,t,n,o);case 6:return l=e.sent,e.next=9,Ue(o,t,a,r,n);case 9:return u=e.sent,console.log("If User is Updated in User Tree ",u),e.abrupt("return",l);case 14:return e.next=16,w.ref("users/"+o+"/projects/"+t+"/shared").once("value").then((function(e){return e.exists()})).catch((function(e){return console.log("iS Owner Error",e)}));case 16:return s=e.sent,e.next=19,w.ref("documents/".concat(t,"/")).once("value").then((function(e){return e.exists()})).catch((function(e){return console.log("isCHild Error \n",e)}));case 19:return d=e.sent,e.next=22,w.ref(i).once("value").then((function(e){return d?e.hasChild(o)?e.child(o).val():e.hasChild("public")?e.child("public").val():null:null})).catch((function(e){return console.log("IschildinUsers Error \n",e)}));case 22:return m=e.sent,e.abrupt("return",[m,s]);case 24:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),De=function(){var e=Object(v.a)(g.a.mark((function e(t,n,a,r){var c,o,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((c={})[t+r]=a,c["documents/".concat(n,"/room/")+r]={name:Object(Se.auth)().currentUser.displayName,photoURL:Object(Se.auth)().currentUser.photoURL,email:Object(Se.auth)().currentUser.email,permission:a},"r"!==a&&"rw"!==a){e.next=10;break}return o=C.httpsCallable("createNewProject"),i=o(c).then((function(e){return!0})).catch((function(e){return console.log(e)})),console.log("user Created",i),e.abrupt("return",i);case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),Ue=function(){var e=Object(v.a)(g.a.mark((function e(t,n,a,r,c){var o,i,l,u;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.ref("documents/"+n+"/metadata/").once("value").then((function(e){return console.log(e.val()),e.val()})).catch((function(e){return console.log("Updated In User Tree Error",e)}));case 2:return o=e.sent,console.log("Project MEtadata \n",null===o||void 0===o?void 0:o.name),(i={})["users/"+t+"/projects/"+n+"/"]={access:c,name:null===o||void 0===o?void 0:o.name,thumbnailURL:null===o||void 0===o?void 0:o.thumbnailURL,shared:{name:r,type:a}},i["creator/"+n]=t,l=C.httpsCallable("createNewProject"),u=l(i).then((function(e){return!0})).catch((function(e){return console.log(e)})),console.log("user Created",u),e.abrupt("return",u);case 11:case"end":return e.stop()}}),e)})));return function(t,n,a,r,c){return e.apply(this,arguments)}}(),ze=Ae;var Te=function(){return r.a.createElement("div",null,r.a.createElement("img",{src:n(385),className:"loader",alt:""}))},Le=(n(386),Te);function Fe(e){var t=Object(l.h)(),n=Object(l.g)(),c=Object(l.i)().projectID,o=Object(a.useState)(!1),i=Object(j.a)(o,2),u=i[0],s=i[1],d=Object(a.useState)(null),m=Object(j.a)(d,2),h=m[0],p=m[1],f=Object(a.useState)(),b=Object(j.a)(f,2),E=b[0],O=b[1];Object(a.useEffect)((function(){Object(v.a)(g.a.mark((function e(){var t,a,r,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ze(c);case 2:t=e.sent,a=Object(j.a)(t,2),r=a[0],o=a[1],console.log("Permission",r,o),setTimeout((function(){return s(!0)}),3e3),null==r?n.push("/dashboard"):(p(r),O(o));case 9:case"end":return e.stop()}}),e)})))()}),[]);return u?r.a.createElement("div",null,r.a.createElement(ee,{style:{position:"absolute",zIndex:0},onLogOut:function(){return e.signOut(),r.a.createElement(l.a,{to:{pathname:"/login",state:{from:t}}})},currentUser:e.currentUser,document:h,projectID:c,isOwner:E}),null!=h?r.a.createElement(Pe,{projectID:c,currentUser:e.currentUser,permission:h,isOwner:E}):r.a.createElement("div",null)):r.a.createElement(Le,null)}var Re={UI_CONFIG:{signInFlow:"popup",signInOptions:[y.GoogleAuthProvider.PROVIDER_ID,y.FacebookAuthProvider.PROVIDER_ID,y.EmailAuthProvider.PROVIDER_ID,y.PhoneAuthProvider.PROVIDER_ID],callbacks:{signInSuccessWithAuthResult:function(){return!1}}}};var _e=n(57);function Me(e){var t=Object(l.h)(),n=Object(l.g)(),a=Object(l.i)(),c=a.projectID,o=a.permissionID,i=a.typeID,u=a.nameID;function s(e,t,n){return e.replace(new RegExp(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),n)}return r.a.useEffect((function(){Object(v.a)(g.a.mark((function e(){var a,r,l,d,m,h;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0!=o&&(d=s(o,"$","/"),m=s(i,"$","/"),h=s(u,"$","/"),a=_e.AES.decrypt(d,"grpthink12!").toString(_e.enc.Utf8),r=_e.AES.decrypt(m,"grpthink12!").toString(_e.enc.Utf8),l=_e.AES.decrypt(h,"grpthink12!").toString(_e.enc.Utf8)),e.next=3,ze(c,a,r,l);case 3:e.sent?n.push("/project/".concat(c)):n.push("/error",{from:t});case 5:case"end":return e.stop()}}),e)})))()}),[]),r.a.createElement("div",null,r.a.createElement(Le,null))}function Ve(){var e=Object(l.h)();return r.a.createElement("div",null,"Invalid Link Enter :-",r.a.createElement("br",null),e.state.from.pathname)}var We=function(e){var t=e.path,n=e.children,a=e.isAuth,c=Object(h.a)(e,["path","children","isAuth"]);return console.log(t),r.a.createElement(l.b,Object.assign({},c,{render:function(e){var t=e.location;return a?n:r.a.createElement(l.a,{to:{pathname:"/login",state:{from:t}}})}}))};function Be(){var e=function(){var e=y,t=Re.UI_CONFIG,n=Object(a.useState)({isSignedIn:!1,pendingAuth:!0,user:null}),r=Object(j.a)(n,2),c=r[0],o=r[1];return Object(a.useEffect)((function(){var e=y().onAuthStateChanged((function(e){o({user:e,pendingAuth:!1,isSignedIn:!!e})}));return function(){return e()}}),[]),{auth:e,uiConfig:t,authState:c}}(),t=e.auth,n=e.uiConfig,c=e.authState;return!c.pendingAuth&&r.a.createElement(i.a,null,r.a.createElement(l.d,null,r.a.createElement(We,{isAuth:c.isSignedIn,path:"/project/:projectID/:permissionID/:typeID/:nameID"},r.a.createElement(Me,null)),r.a.createElement(p,{isAuth:c.isSignedIn,path:"/project/:projectID"},r.a.createElement(Fe,{currentUser:function(){return t().currentUser},signOut:function(){return t().signOut()}})),r.a.createElement(l.b,{path:"/login"},r.a.createElement(m,{auth:t,uiConfig:n,authState:c})),r.a.createElement(p,{isAuth:c.isSignedIn,path:"/dashboard"},r.a.createElement(te,{currentUser:function(){return t().currentUser},signOut:function(){return t().signOut()}})),r.a.createElement(l.b,{path:"/error"},r.a.createElement(Ve,null)),r.a.createElement(l.b,{path:"/"},r.a.createElement(u,{pendingAuth:c.pendingAuth,isAuth:c.isSignedIn}))))}var qe=r.a.createContext(),Ge=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(qe.Provider,{value:{appname:"groupthink"}},r.a.createElement(Be,null)))};n(409);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Ge,null)),document.getElementById("root"))}},[[235,13,14]]]);